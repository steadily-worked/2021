<Node.js êµê³¼ì„œ ê°œì • 2íŒ> ì„ ìš”ì•½í•˜ê³  ë‚˜ë¦„ëŒ€ë¡œì˜ ìƒê°ì´ ë‹´ê¸´ ê¸€ì…ë‹ˆë‹¤.

## 3. ë…¸ë“œ ê¸°ëŠ¥

ì´ ì¥ì—ì„œëŠ” ë…¸ë“œì™€ ì²˜ìŒìœ¼ë¡œ ìƒí˜¸ì‘ìš©ì„ í•´ë³´ê³ , ë…¸ë“œë¡œ ìë°”ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ì„ ì‹¤í–‰í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë³¼ ê²ƒì´ë‹¤. ë˜í•œ, ë…¸ë“œê°€ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” ê°ì²´ì™€ ëª¨ë“ˆ ì‚¬ìš©ë²•ë„ ì•Œì•„ë³¼ ê²ƒì´ë‹¤. ëª¨ë“ˆì„ ì‚¬ìš©í•˜ë©´ì„œ ì¤‘ìš”í•œ ê°œë…ì¸ ë²„í¼ì™€ ìŠ¤íŠ¸ë¦¼, ë™ê¸°ì™€ ë¹„ë™ê¸°, ì´ë²¤íŠ¸, ì˜ˆì™¸ ì²˜ë¦¬ì— ëŒ€í•´ì„œë„ ì•Œì•„ë³¼ ê²ƒì´ë‹¤. í•œ ë²ˆì— ì™¸ìš°ë ¤ê³  í•˜ì§€ ë§ê³  ìŠì–´ë²„ë¦´ ë•Œë§ˆë‹¤ ë‹¤ì‹œ ë³´ë©´ ëœë‹¤.

### 3-1. REPL ì‚¬ìš©í•˜ê¸°

ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ìŠ¤í¬ë¦½íŠ¸ ì–¸ì–´ì´ë¯€ë¡œ ë¯¸ë¦¬ ì»´íŒŒì¼ì„ í•˜ì§€ ì•Šì•„ë„ ì¦‰ì„ì—ì„œ ì½”ë“œë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤. ì´ì „ ì¥ì—ì„œëŠ” ë¸Œë¼ìš°ì € ì½˜ì†” íƒ­ì—ì„œ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œë¥¼ ì…ë ¥í•´ë´¤ì„ ê²ƒì´ë‹¤. ë…¸ë“œë„ ë¹„ìŠ·í•œ ì½˜ì†”ì„ ì œê³µí•˜ëŠ”ë°, ì…ë ¥í•œ ì½”ë“œë¥¼ ì½ê³ (Read), í•´ì„í•˜ê³ (Eval), ê²°ê³¼ë¬¼ì„ ë°˜í™˜í•˜ê³ (Print), ì¢…ë£Œí•  ë•Œê¹Œì§€ ë°˜ë³µí•œë‹¤(Loop)ë¼ê³  í•´ì„œ `REPL`(Read Eval Print Loop)ì´ë¼ê³  ë¶€ë¥¸ë‹¤.

ë…¸ë“œì˜ REPLì„ ì§ì ‘ ì‚¬ìš©í•´ë³´ì.

```
$ node
>
```

í”„ë¡¬í”„íŠ¸ê°€ > ëª¨ì–‘ìœ¼ë¡œ ë°”ë€Œì—ˆë‹¤ë©´ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œë¥¼ ì…ë ¥í•  ìˆ˜ ìˆë‹¤. ê°„ë‹¨í•œ ë¬¸ìì—´ì„ ì¶œë ¥í•´ë³´ì.

> ì½˜ì†”

```
> const str = 'Hello world, hello node';
undefined
> console.log(str);
Hello world, hello node
undefined
>
```

ìœ„ì™€ ê°™ì´ ì¶œë ¥ë˜ì—ˆë‹¤ë©´ ì„±ê³µì´ë‹¤. ê°ìê°€ ì…ë ¥í•œ ì½”ë“œë¥¼ REPLì´ ì½ê³ (Read), í•´ì„í•œ(Eval) ë’¤ ë°”ë¡œ ê²°ê³¼ë¬¼ì„ ì¶œë ¥í—€ë‹¤(Print). ê·¸ë¦¬ê³  ì¢…ë£Œë˜ê¸° ì „ê¹Œì§€ ê°ìì˜ ì…ë ¥ì„ ê¸°ë‹¤ë¦°ë‹¤(Loop). REPLì„ ì¢…ë£Œí•˜ë ¤ë©´ `.exit`ì„ ì…ë ¥í•˜ë©´ ëœë‹¤.

REPLì€ í•œë‘ ì¤„ì§œë¦¬ ì½”ë“œë¥¼ í…ŒìŠ¤íŠ¸í•´ë³´ëŠ” ìš©ë„ë¡œëŠ” ì¢‹ì§€ë§Œ ì—¬ëŸ¬ ì¤„ì˜ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ê¸°ì—ëŠ” ë¶ˆí¸í•˜ë‹¤. ê¸´ ì½”ë“œì¸ ê²½ìš°ì—ëŠ” ì½”ë“œë¥¼ ìë°”ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ë¡œ ë§Œë“  í›„ íŒŒì¼ì„ í†µì§¸ë¡œ ì‹¤í–‰í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. ì´ì œ JS íŒŒì¼ì„ ë§Œë“¤ì–´ ì‹¤í–‰í•´ë³´ì.

### 3-2. JS íŒŒì¼ ì‹¤í–‰í•˜ê¸°

REPLì— ì§ì ‘ ì½”ë“œë¥¼ ì…ë ¥í•˜ëŠ” ëŒ€ì‹  ìë°”ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ì„ ë§Œë“¤ì–´ ì‹¤í–‰í•  ê²ƒì´ë‹¤. ë‹¤ìŒê³¼ ê°™ì€ ìë°”ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ì„ ë§Œë“¤ì–´ë³´ì.

> helloWorld.js

```js
helloWorld = () => {
  console.log("hello world");
  helloNode();
};

helloNode = () => {
  console.log("hello Node");
};

helloWorld();
```

ì½˜ì†”ì—ì„œ `node [ìë°”ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ ê²½ë¡œ]`ë¡œ ì‹¤í–‰í•œë‹¤. í™•ì¥ì(`.js`)ëŠ” ìƒëµí•´ë„ ëœë‹¤. REPLì—ì„œ ì…ë ¥í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¯€ë¡œ ì£¼ì˜í•˜ì. REPLì´ ì•„ë‹ˆë¼ ì½˜ì†”ì—ì„œ ì…ë ¥í•´ì•¼ í•œë‹¤.

> ì½˜ì†”

```
$ node helloWorld
hello world
hello Node
```

### 3-3. ëª¨ë“ˆë¡œ ë§Œë“¤ê¸°

ë…¸ë“œëŠ” ì½”ë“œë¥¼ ëª¨ë“ˆë¡œ ë§Œë“¤ ìˆ˜ ìˆë‹¤ëŠ” ì ì—ì„œ ë¸Œë¼ìš°ì €ì˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ì™€ ë‹¤ë¥´ë‹¤. **ëª¨ë“ˆ**ì´ë€ íŠ¹ì •í•œ ê¸°ëŠ¥ì„ í•˜ëŠ” í•¨ìˆ˜ë‚˜ ë³€ìˆ˜ë“¤ì˜ ì§‘í•©ì´ë‹¤. ì˜ˆë¥¼ ë“¤ë©´ ìˆ˜í•™ì— ê´€ë ¨ëœ ì½”ë“œë“¤ë§Œ ëª¨ì•„ì„œ ëª¨ë“ˆì„ í•˜ë‚˜ ë§Œë“¤ ìˆ˜ ìˆë‹¤. ëª¨ë“ˆì€ ìì²´ë¡œë„ í•˜ë‚˜ì˜ í”„ë¡œê·¸ë¨ì´ë©´ì„œ ë‹¤ë¥¸ í”„ë¡œê·¸ë¨ì˜ ë¶€í’ˆìœ¼ë¡œë„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

ëª¨ë“ˆë¡œ ë§Œë“¤ì–´ë‘ë©´ ì—¬ëŸ¬ í”„ë¡œê·¸ë¨ì— í•´ë‹¹ ëª¨ë“ˆì„ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì½”ë“œë¥¼ ì¬ì‚¬ìš©í•˜ê¸° ìœ„í•´ í•¨ìˆ˜ë¡œ ë§Œë“œëŠ” ê²ƒê³¼ ë¹„ìŠ·í•˜ë‹¤.

ë³´í†µ íŒŒì¼ í•˜ë‚˜ê°€ ëª¨ë“ˆ í•˜ë‚˜ê°€ ëœë‹¤. íŒŒì¼ë³„ë¡œ ì½”ë“œë¥¼ ëª¨ë“ˆí™”í•  ìˆ˜ ìˆì–´ ê´€ë¦¬í•˜ê¸° í¸í•˜ë‹¤.

> **ë¸Œë¼ìš°ì €ì˜ ëª¨ë“ˆ**
>
> 2015ë…„ ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ë„ `import/export`ë¼ëŠ” ëª¨ë“ˆ ê°œë…ì´ ë„ì…ë˜ì—ˆì§€ë§Œ, ë¸Œë¼ìš°ì €ì—ëŠ” êµ¬í˜„ë˜ì§€ ì•Šì•„ì„œ ì‚¬ìš©í•  ìˆ˜ ì—†ì—ˆë‹¤. í¬ë¡¬ 60 ë²„ì „ë¶€í„° ë“œë””ì–´ ë¸Œë¼ìš°ì €ì—ì„œë„ ëª¨ë“ˆì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤. ì•ìœ¼ë¡œ ë” ë§ì€ ë¸Œë¼ìš°ì €ê°€ ëª¨ë“ˆ ì‹œìŠ¤í…œì„ ì§€ì›í•  ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤.

ì‹¤ì œë¡œ ëª¨ë“ˆì„ ë§Œë“¤ì–´ë³´ì. ëª¨ë“ˆì„ ë§Œë“¤ ë•ŒëŠ” ëª¨ë“ˆì´ ë  íŒŒì¼ê³¼ ëª¨ë“ˆì„ ë¶ˆëŸ¬ì™€ì„œ ì‚¬ìš©í•  íŒŒì¼ì´ í•„ìš”í•˜ë‹¤.

var.jsì™€ func.js, index.jsë¥¼ ê°™ì€ í´ë”ì— ë§Œë“¤ì. ë¨¼ì € var.jsë¥¼ ì‘ì„±í•œë‹¤.

> var.js

```js
const odd = "í™€ìˆ˜";
const even = "ì§ìˆ˜";

module.exports = {
  odd,
  even,
};
```

var.jsì— ë³€ìˆ˜ ë‘ ê°œë¥¼ ì„ ì–¸í–ˆë‹¤. ê·¸ë¦¬ê³  `module.exports`ì— ë³€ìˆ˜ë“¤ì„ ë‹´ì€ ê°ì²´ë¥¼ ëŒ€ì…í•œë‹¤. ì´ì œ ì´ íŒŒì¼ì€ ëª¨ë“ˆë¡œì„œ ê¸°ëŠ¥í•œë‹¤. ë³€ìˆ˜ë“¤ì„ ëª¨ì•„ë‘” ëª¨ë“ˆì´ ë˜ëŠ” ê²ƒì´ë‹¤. ë‹¤ë¥¸ íŒŒì¼ì—ì„œ ì´ íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¤ë©´ `module.exports`ì— ëŒ€ì…ëœ ê°’ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

ì´ë²ˆì—ëŠ” var.jsë¥¼ ì°¸ì¡°í•˜ëŠ” func.jsë¥¼ ì‘ì„±í•˜ì.

> func.js

```js
const { odd, even } = require("./var");

checkOddOrEven = (num) => {
  if (num % 2) {
    return odd;
  }
  return even;
};

module.exports = checkOddOrEven;
```

require í•¨ìˆ˜ ì•ˆì— ë¶ˆëŸ¬ì˜¬ ëª¨ë“ˆì˜ ê²½ë¡œë¥¼ ì ëŠ”ë‹¤. ìœ„ ì˜ˆì œì—ì„œëŠ” ê°™ì€ í´ë” ì•ˆì— íŒŒì¼ì„ ë§Œë“¤ì—ˆì§€ë§Œ, ë‹¤ë¥¸ í´ë” ì•ˆì— ìˆëŠ” íŒŒì¼ë„ ëª¨ë“ˆë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. require í•¨ìˆ˜ì˜ ì¸ìˆ˜ë¡œ ì œê³µí•˜ëŠ” ê²½ë¡œë§Œ ì˜ ì§€ì •í•˜ë©´ ëœë‹¤. íŒŒì¼ ê²½ë¡œì—ì„œ jsë‚˜ json ê°™ì€ í™•ì¥ìëŠ” ìƒëµí•  ìˆ˜ ìˆë‹¤.

ì˜ˆì œ ì½”ë“œì—ì„œ require í•¨ìˆ˜ë¡œ var.jsì— ìˆë˜ ê°’ë“¤ì„ ë¶ˆëŸ¬ì˜¤ê³  ìˆë‹¤. var.jsì˜ `module.exports`ì— ë‹´ê²¨ ìˆë˜ ê°ì²´ë¥¼ ë¶ˆëŸ¬ì™€ func.jsì—ì„œ ì‚¬ìš©í•˜ëŠ” ëª¨ìŠµì´ë‹¤.

var.jsì—ì„œ ë³€ìˆ˜ë¥¼ ë¶ˆëŸ¬ì˜¨ ë’¤, ìˆ«ìì˜ í™€ì§ì„ íŒë³„í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì„ ì–¸í–ˆë‹¤. ê·¸ë¦¬ê³  ë‹¤ì‹œ `module.exports`ì— í•¨ìˆ˜ë¥¼ ëŒ€ì…í–ˆë‹¤. ì´ë ‡ê²Œ ë‹¤ë¥¸ ëª¨ë“ˆ(var.js)ì„ ì‚¬ìš©í•˜ëŠ” íŒŒì¼ì„ ë‹¤ì‹œ ëª¨ë“ˆ(func.js)ë¡œ ë§Œë“¤ ìˆ˜ ìˆë‹¤. ë˜í•œ, `module.exports`ì—ëŠ” ê°ì²´ë§Œ ëŒ€ì…í•´ì•¼ í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ í•¨ìˆ˜ë‚˜ ë³€ìˆ˜ë¥¼ ëŒ€ì…í•´ë„ ëœë‹¤.

ë§ˆì§€ë§‰ìœ¼ë¡œ index.jsë¥¼ ì‘ì„±í•˜ì.

> index.js

```js
const { odd, even } = require("./var");
const checkNumber = require("./func");

checkStringOddOrEven = (str) => {
  if (str.length % 2) {
    // í™€ìˆ˜ë©´
    return odd;
  }
  return even;
};

console.log(checkNumber(10));
console.log(checkStringOddOrEven("hello"));
```

index.jsëŠ” var.jsì™€ func.jsë¥¼ ëª¨ë‘ ì°¸ì¡°í•œë‹¤. ëª¨ë“ˆ í•˜ë‚˜ê°€ ì—¬ëŸ¬ ê°œì˜ ëª¨ë“ˆì„ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤. ë˜í•œ, var.jsê°€ func.jsì™€ index.jsì— ë‘ ë²ˆ ì“°ì´ëŠ” ê²ƒì²˜ëŸ¼, ëª¨ë“ˆ í•˜ë‚˜ê°€ ì—¬ëŸ¬ ê°œì˜ ëª¨ë“ˆì— ì‚¬ìš©ë  ìˆ˜ë„ ìˆë‹¤.

ëª¨ë“ˆë¡œë¶€í„° ê°’ì„ ë¶ˆëŸ¬ì˜¬ ë•Œ ë³€ìˆ˜ ì´ë¦„ì„ ë‹¤ë¥´ê²Œ ì§€ì •í•  ìˆ˜ë„ ìˆë‹¤. func.jsì˜ `checkOddOrEven`ì´ `checkNumber`ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì‚¬ìš©ë˜ê³  ìˆë‹¤.

index.jsë¥¼ ì‹¤í–‰í•´ë³´ë©´, ê²°ê³¼ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

> ì½˜ì†”

```
$ node index
ì§ìˆ˜
í™€ìˆ˜
```

ì´ë ‡ê²Œ ì—¬ëŸ¬ íŒŒì¼ì— ê±¸ì³ ì¬ì‚¬ìš©ë˜ëŠ” í•¨ìˆ˜ë‚˜ ë³€ìˆ˜ë¥¼ ëª¨ë“ˆë¡œ ë§Œë“¤ì–´ì£¼ë©´ í¸ë¦¬í•˜ë‹¤. ê·¸ëŸ¬ë‚˜ ëª¨ë“ˆì´ ë§ì•„ì§€ê³  ëª¨ë“ˆ ê°„ì˜ ê´€ê³„ê°€ ì–½íˆê²Œ ë˜ë©´ êµ¬ì¡°ë¥¼ íŒŒì•…í•˜ê¸° ì–´ë µë‹¤ëŠ” ë‹¨ì ë„ ìˆë‹¤. ë…¸ë“œì—ì„œëŠ” ëŒ€ë¶€ë¶„ì˜ íŒŒì¼ì´ ë‹¤ë¥¸ íŒŒì¼ì„ ëª¨ë“ˆë¡œ ì‚¬ìš©í•˜ê³  ìˆìœ¼ë¯€ë¡œ ëª¨ë“ˆì„ ë§Œë“¤ê³  ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ ê¼­ ì•Œì•„ë‘¬ì•¼ í•œë‹¤.

> Note: ES6 ëª¨ë“ˆ
>
> ES6ì´ ë„ì…ë˜ë©´ì„œ ìë°”ìŠ¤í¬ë¦½íŠ¸ë„ ìì²´ ëª¨ë“ˆ ì‹œìŠ¤í…œ ë¬¸ë²•ì´ ìƒê²¼ë‹¤. ì´ ë¬¸ë²•ì€ ë…¸ë“œì˜ ëª¨ë“ˆ ì‹œìŠ¤í…œê³¼ ì¡°ê¸ˆ ë‹¤ë¥´ë‹¤. ë³¸ë¬¸ì˜ func.jsë¥¼ ES6 ëª¨ë“ˆ ìŠ¤íƒ€ì¼ë¡œ ë°”ê¿” ë³¼ ê²ƒì´ë‹¤.
>
> **func.mjs**
>
> ```js
> import { odd, even } from "./var";
>
> checkOddOrEven = (num) => {
>   if (num % 2) {
>     return odd;
>   }
>   return even;
> };
>
> export default checkOddOrEven;
> ```
>
> `require`ì™€ `module.exports`ê°€ `import`, `export default`ë¡œ ë°”ë€Œì—ˆë‹¤. ìƒë‹¹í•œ ë¶€ë¶„ì—ì„œ ì°¨ì´ê°€ ìˆìœ¼ë¯€ë¡œ ë‹¨ìˆœíˆ ê¸€ìë§Œ ë°”ê¿”ì„œëŠ” ì œëŒ€ë¡œ ë™ì‘í•˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤. ë‹¤í–‰íˆ ìœ„ì—ì„œëŠ” requireë¥¼ importë¡œ, module.exportsë¥¼ export defaultë¡œ ë°”ê¾¸ê¸°ë§Œ í•˜ë©´ ëœë‹¤.
>
> ë…¸ë“œì—ì„œë„ 9 ë²„ì „ë¶€í„° ES6ì˜ ëª¨ë“ˆ ì‹œìŠ¤í…œì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ íŒŒì¼ì˜ í™•ì¥ìë¥¼ mjsë¡œ ì§€ì •í•´ì•¼ í•˜ëŠ” ì œí•œì´ ìˆë‹¤. mjs í™•ì¥ì ëŒ€ì‹  js í™•ì¥ìë¥¼ ì‚¬ìš©í•˜ë©´ì„œ ES6 ëª¨ë“ˆì„ ì‚¬ìš©í•˜ë ¤ë©´ ì´í›„ ë°°ìš¸ `package.json`ì— `type: "module"` ì†ì„±ì„ ë„£ìœ¼ë©´ ëœë‹¤.

ë°©ê¸ˆ ì¼ë˜ require í•¨ìˆ˜ë‚˜ module ê°ì²´ëŠ” ë”°ë¡œ ì„ ì–¸í•˜ì§€ ì•Šì•˜ìŒì—ë„ ì‚¬ìš©í•  ìˆ˜ ìˆì—ˆë‹¤. ì´ê²ƒì´ ì–´ë–»ê²Œ ê°€ëŠ¥í• ê¹Œ? ë°”ë¡œ ë…¸ë“œì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” ë‚´ì¥ ê°ì²´ì´ê¸° ë•Œë¬¸ì´ë‹¤. ì´ì œ ë‚´ì¥ ê°ì²´ë¥¼ ìì„¸íˆ ì•Œì•„ë³´ì.

### 3-4. ë…¸ë“œ ë‚´ì¥ ê°ì²´ ì•Œì•„ë³´ê¸°

ë…¸ë“œì—ì„œëŠ” ê¸°ë³¸ì ì¸ ë‚´ì¥ ê°ì²´ì™€ ë‚´ì¥ ëª¨ë“ˆ(3.5 ì°¸ì¡°)ì„ ì œê³µí•œë‹¤. ë”°ë¡œ ì„¤ì¹˜í•˜ì§€ ì•Šì•„ë„ ë°”ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©°, ë¸Œë¼ìš°ì €ì˜ `window` ê°ì²´ì™€ ë¹„ìŠ·í•˜ë‹¤ê³  ë³´ë©´ ëœë‹¤.

ì´ë²ˆì—ëŠ” ë…¸ë“œ í”„ë¡œê·¸ë˜ë°ì„ í•  ë•Œ ë§ì´ ì“°ì´ëŠ” ë‚´ì¥ ê°ì²´ë¥¼ ì•Œì•„ ë³¼ ê²ƒì´ë‹¤.

#### 3-4-1. global

ë¨¼ì € global ê°ì²´ì´ë‹¤. ë¸Œë¼ìš°ì €ì˜ windowì™€ ê°™ì€ ì „ì—­ ê°ì²´ì´ë‹¤. ì „ì—­ ê°ì²´ì´ë¯€ë¡œ ëª¨ë“  íŒŒì¼ì—ì„œ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤. ë˜í•œ, window.open ë©”ì†Œë“œë¥¼ ê·¸ëƒ¥ openìœ¼ë¡œ í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” ê²ƒì²˜ëŸ¼ globalë„ ìƒëµí•  ìˆ˜ ìˆë‹¤. ì´ì „ ì ˆì—ì„œ ì‚¬ìš©í–ˆë˜ require í•¨ìˆ˜ë„ global.requireì—ì„œ globalì´ ìƒëµëœ ê²ƒì´ë‹¤. ë…¸ë“œ ì½˜ì†”ì— ë¡œê·¸ë¥¼ ê¸°ë¡í•˜ëŠ” console ê°ì²´ë„ ì›ë˜ëŠ” global.consoleì´ë‹¤.

global ê°ì²´ ë‚´ë¶€ì—ëŠ” ë§¤ìš° ë§ì€ ì†ì„±ì´ ë“¤ì–´ ìˆë‹¤. ì´ ì ˆì—ì„œ ë°°ìš¸ ë‚´ìš©ë“¤ì´ global ê°ì²´ ì•ˆì— ìˆë‹¤. ë‚´ë¶€ë¥¼ ë³´ë ¤ë©´ REPLì„ ì´ìš©í•´ì•¼ í•œë‹¤.

> Note: ë…¸ë“œì˜ window, document ê°ì²´
>
> ë…¸ë“œì— DOMì´ë‚˜ BOMì´ ì—†ìœ¼ë¯€ë¡œ windowì™€ document ê°ì²´ëŠ” ë…¸ë“œì—ì„œ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤. ë…¸ë“œì—ì„œ window ë˜ëŠ” documentë¥¼ ì‚¬ìš©í•˜ë©´ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.

ë…¸ë“œ ë²„ì „ì— ë”°ë¼ ì½˜ì†” ë‚´ìš©ì´ ë‹¤ë¥¼ ìˆ˜ ìˆë‹¤. ë‚´ìš©ì´ ë„ˆë¬´ ë§ì•„ ì¤„ì˜€ì§€ë§Œ, global ê°ì²´ ì•ˆì—ëŠ” ìˆ˜ì‹­ ê°€ì§€ì˜ ì†ì„±ì´ ë‹´ê²¨ ìˆë‹¤. ëª¨ë‘ ì•Œ í•„ìš”ëŠ” ì—†ìœ¼ë¯€ë¡œ, ìì£¼ ì‚¬ìš©í•˜ëŠ” ì†ì„±ë“¤ë§Œ ì•Œì•„ ë³¼ ê²ƒì´ë‹¤.

ì „ì—­ ê°ì²´ë¼ëŠ” ì ì„ ì´ìš©í•˜ì—¬ íŒŒì¼ ê°„ì— ë°ì´í„°ë¥¼ ê³µìœ í•  ë•Œ ì‚¬ìš©í•˜ê¸°ë„ í•œë‹¤. globalA.jsì™€ globalB.jsë¥¼ ê°™ì€ í´ë”ì— ìƒì„±í•˜ì.

> globalA.js

```js
module.exports = () => global.message;
```

> globalB.js

```js
const A = require("./globalA");

global.mesage = "ì•ˆë…•í•˜ì„¸ìš”";
console.log(A());
```

globalA ëª¨ë“ˆì˜ í•¨ìˆ˜ëŠ” global.message ê°’ì„ ë°˜í™˜í•œë‹¤. globalB.jsì—ì„œëŠ” global ê°ì²´ì— ì†ì„±ëª…ì´ messageì¸ ê°’ì„ ëŒ€ì…í•˜ê³  globalA ëª¨ë“ˆì˜ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤. ì½˜ì†” ê²°ê³¼ëŠ” globalBì—ì„œ ë„£ì€ `global.message` ê°’ì„ globalAì—ì„œë„ ì ‘ê·¼í•  ìˆ˜ ìˆìŒì„ ë³´ì—¬ì¤€ë‹¤.

> ì½˜ì†”

```
$ node globalB
ì•ˆë…•í•˜ì„¸ìš”
```

> ğŸš«Warning: global ê°ì²´ì˜ ë‚¨ìš©
>
> global ê°ì²´ì˜ ì†ì„±ì— ê°’ì„ ëŒ€ì…í•˜ì—¬ íŒŒì¼ ê°„ì— ë°ì´í„°ë¥¼ ê³µìœ í•  ìˆ˜ ìˆì§€ë§Œ, ì´ë¥¼ ë‚¨ìš©í•˜ì§€ ë§ ê²ƒ. í”„ë¡œê·¸ë¨ì˜ ê·œëª¨ê°€ ì»¤ì§ˆìˆ˜ë¡ ì–´ë–¤ íŒŒì¼ì—ì„œ global ê°ì²´ì— ê°’ì„ ëŒ€ì…í–ˆëŠ”ì§€ ì°¾ê¸° í˜ë“¤ì–´ì ¸ ìœ ì§€ ë³´ìˆ˜ì— ì–´ë ¤ì›€ì„ ê²ªê²Œ ë˜ê¸° ë•Œë¬¸ì´ë‹¤. ë‹¤ë¥¸ íŒŒì¼ì˜ ê°’ì„ ì‚¬ìš©í•˜ê³  ì‹¶ë‹¤ë©´ ëª¨ë“ˆ í˜•ì‹ìœ¼ë¡œ ë§Œë“¤ì–´ì„œ ëª…ì‹œì ìœ¼ë¡œ ê°’ì„ ë¶ˆëŸ¬ì™€ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.

#### 3-4-2. console

ì§€ê¸ˆê¹Œì§€ ì‚¬ìš©í–ˆë˜ consoleë„ ë…¸ë“œì—ì„œëŠ” window ëŒ€ì‹  global ê°ì²´ ì•ˆì— ë“¤ì–´ ìˆìœ¼ë©°, ë¸Œë¼ìš°ì €ì—ì„œì˜ consoleê³¼ ê±°ì˜ ë¹„ìŠ·í•˜ë‹¤.

console ê°ì²´ëŠ” ë³´í†µ ë””ë²„ê¹…ì„ ìœ„í•´ ì‚¬ìš©í•œë‹¤. ê°œë°œí•˜ë©´ì„œ ë³€ìˆ˜ì— ê°’ì´ ì œëŒ€ë¡œ ë“¤ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ê³ , ì—ëŸ¬ ë°œìƒ ì‹œ ì—ëŸ¬ ë‚´ìš©ì„ ì½˜ì†”ì— í‘œì‹œí•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ë©°, ì½”ë“œ ì‹¤í–‰ ì‹œê°„ì„ ì•Œì•„ë³´ë ¤ê³  í•  ë•Œë„ ì‚¬ìš©í•œë‹¤. ëŒ€í‘œì ìœ¼ë¡œ `console.log` ë©”ì†Œë“œê°€ ìˆë‹¤. `console.log`ëŠ” ì§€ê¸ˆê» ê³„ì† ì‚¬ìš©í–ˆìœ¼ë¯€ë¡œ ìµìˆ™í•  ê²ƒì´ë‹¤. ë‹¤ë¥¸ ë¡œê¹… í•¨ìˆ˜ë„ ì•Œì•„ë³´ì.

> console.js

```js
const string = "abc";
const number = 1;
const boolean = true;
const obj = {
  outside: {
    inside: {
      key: "value",
    },
  },
};

console.time("ì „ì²´ ì‹œê°„");
console.log("í‰ë²”í•œ ë¡œê·¸ì…ë‹ˆë‹¤ ì‰¼í‘œë¡œ êµ¬ë¶„í•´ ì—¬ëŸ¬ ê°’ì„ ì°ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤");
console.log(string, number, boolean);
console.error("ì—ëŸ¬ ë©”ì‹œì§€ëŠ” console.errorì— ë‹´ì•„ì£¼ì„¸ìš”");

console.table([
  { name: "sangmin", birth: 1996 },
  { name: "hero", birth: 1988 },
]);

console.dir(obj, { colors: false, depth: 2 });
console.dir(obj, { colors: true, depth: 1 });

console.time("ì‹œê°„ ì¸¡ì •");
for (let i = 0; i < 100000; i++) {}
console.timeEnd("ì‹œê°„ ì¸¡ì •");

function b() {
  console.trace("ì—ëŸ¬ ìœ„ì¹˜ ì¶”ì ");
}
function a() {
  b();
}
a();
console.timeEnd("ì „ì²´ ì‹œê°„");
```

- console.time(ë ˆì´ë¸”): console.timeEnd(ë ˆì´ë¸”)ê³¼ ëŒ€ì‘ë˜ì–´ ê°™ì€ ë ˆì´ë¸”ì„ ê°€ì§„ timeê³¼ timeEnd ì‚¬ì´ì˜ ì‹œê°„ì„ ì¸¡ì •í•œë‹¤.
- console.log(ë‚´ìš©): í‰ë²”í•œ ë¡œê·¸ë¥¼ ì½˜ì†”ì— í‘œì‹œí•œë‹¤. `console.log(ë‚´ìš©, ë‚´ìš©, ...)` ì²˜ëŸ¼ ì—¬ëŸ¬ ë‚´ìš©ì„ ë™ì‹œì— í‘œì‹œí•  ìˆ˜ë„ ìˆë‹¤.
- console.error(ì—ëŸ¬ ë‚´ìš©): ì—ëŸ¬ë¥¼ ì½˜ì†”ì— í‘œì‹œí•œë‹¤.
- console.table(ë°°ì—´): ë°°ì—´ì— ìš”ì†Œë¡œ ê°ì²´ ë¦¬í„°ëŸ´ì„ ë„£ìœ¼ë©´, ê°ì²´ì˜ ì†ì„±ë“¤ì´ í…Œì´ë¸” í˜•ì‹ìœ¼ë¡œ í‘œí˜„ëœë‹¤.
- console.dir(ê°ì²´, ì˜µì…˜): ê°ì²´ë¥¼ ì½˜ì†”ì— í‘œì‹œí•  ë•Œ ì‚¬ìš©í•œë‹¤. ì²« ë²ˆì§¸ ì¸ìˆ˜ë¡œ í‘œì‹œí•  ê°ì²´ë¥¼ ë„£ê³ , ë‘ ë²ˆì§¸ ì¸ìˆ˜ë¡œ ì˜µì…˜ì„ ë„£ëŠ”ë‹¤. ì˜µì…˜ì˜ colorsë¥¼ trueë¡œ í•˜ë©´ ì½˜ì†”ì— ìƒ‰ì´ ì¶”ê°€ë˜ì–´ ë³´ê¸°ê°€ í•œê²° í¸í•´ì§„ë‹¤. depthëŠ” ê°ì²´ ì•ˆì˜ ê°ì²´ë¥¼ ëª‡ ë‹¨ê³„ê¹Œì§€ ë³´ì—¬ì¤„ì§€ë¥¼ ê²°ì •í•œë‹¤. ê¸°ë³¸ê°’ì€ 2ì´ë‹¤.
- console.trace(ë ˆì´ë¸”): ì—ëŸ¬ê°€ ì–´ë””ì„œ ë°œìƒí•˜ëŠ”ì§€ ì¶”ì í•  ìˆ˜ ìˆê²Œ í•œë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ì—ëŸ¬ ë°œìƒ ì‹œ ì—ëŸ¬ ìœ„ì¹˜ë¥¼ ì•Œë ¤ì£¼ë¯€ë¡œ ìì£¼ ì‚¬ìš©í•˜ì§€ëŠ” ì•Šì§€ë§Œ, ìœ„ì¹˜ê°€ ë‚˜ì˜¤ì§€ ì•ŠëŠ”ë‹¤ë©´ ì‚¬ìš©í•  ë§Œ í•˜ë‹¤.

ì½”ë“œë¥¼ ì‹¤í–‰í•˜ë©´ ì½˜ì†”ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì´ í‘œì‹œëœë‹¤. ë‹¨, `console.time`ì˜ ì‹œê°„ì´ë‚˜ `console.trace`ì˜ ê²½ë¡œëŠ” ì‚¬ìš©ìì˜ ì»´í“¨í„° í™˜ê²½ì— ë”°ë¼ ë‹¤ë¥¼ ìˆ˜ ìˆë‹¤.

> ì½˜ì†”

```
$ node console
í‰ë²”í•œ ë¡œê·¸ì…ë‹ˆë‹¤ ì‰¼í‘œë¡œ êµ¬ë¶„í•´ ì—¬ëŸ¬ ê°’ì„ ì°ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤
abc 1 true
ì—ëŸ¬ ë©”ì‹œì§€ëŠ” console.errorì— ë‹´ì•„ì£¼ì„¸ìš”
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”
â”‚ (index) â”‚   name    â”‚ birth â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    0    â”‚ 'sangmin' â”‚ 1996  â”‚
â”‚    1    â”‚  'hero'   â”‚ 1988  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜
{ outside: { inside: { key: 'value' } } }
{ outside: { inside: [Object] } }
ì‹œê°„ ì¸¡ì •: 3.666ms
Trace: ì—ëŸ¬ ìœ„ì¹˜ ì¶”ì 
    at b (/Users/sangminpark/Desktop/2021/JavaScript/Node.js/console.js:30:11)
    at a (/Users/sangminpark/Desktop/2021/JavaScript/Node.js/console.js:33:3)
    at Object.<anonymous> (/Users/sangminpark/Desktop/2021/JavaScript/Node.js/console.js:35:1)
    at Module._compile (internal/modules/cjs/loader.js:1063:30)
    at Object.Module._extensions..js (internal/modules/cjs/loader.js:1092:10)
    at Module.load (internal/modules/cjs/loader.js:928:32)
    at Function.Module._load (internal/modules/cjs/loader.js:769:14)
    at Function.executeUserEntryPoint [as runMain] (internal/modules/run_main.js:72:12)
    at internal/main/run_main_module.js:17:47
ì „ì²´ ì‹œê°„: 19.517ms
```

í¸ë¦¬í•œ ë””ë²„ê¹…ì„ ìœ„í•´ console ê°ì²´ì—ëŠ” ì§€ê¸ˆë„ ìƒˆë¡œìš´ ë©”ì†Œë“œë“¤ì´ ì¶”ê°€ë˜ê³  ìˆë‹¤. ì‹¤ì œë¡œëŠ” console.jsì—ì„œ ì†Œê°œí•œ ë©”ì†Œë“œë³´ë‹¤ ë” ë‹¤ì–‘í•œ ë©”ì†Œë“œê°€ ìˆë‹¤.

#### 3-4-3. íƒ€ì´ë¨¸

íƒ€ì´ë¨¸ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” í•¨ìˆ˜ì¸ `setTimeout`, `setInterval`, `setImmediate`ëŠ” ë…¸ë“œì—ì„œ window ëŒ€ì‹  global ê°ì²´ ì•ˆì— ë“¤ì–´ìˆë‹¤. `setTimeout`ê³¼ `setInterval`ì€ ì›¹ ë¸Œë¼ìš°ì €ì—ì„œë„ ìì£¼ ì‚¬ìš©ë˜ë¯€ë¡œ ìµìˆ™í•  ê²ƒì´ë‹¤.

- setTimeout(ì½œë°± í•¨ìˆ˜, ë°€ë¦¬ì´ˆ): ì£¼ì–´ì§„ ë°€ë¦¬ì´ˆ(1/1000ì´ˆ) ì´í›„ì— ì½œë°± í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•œë‹¤.
- setInterval(ì½œë°± í•¨ìˆ˜, ë°€ë¦¬ì´ˆ): ì£¼ì–´ì§„ ë°€ë¦¬ì´ˆë§ˆë‹¤ ì½œë°± í•¨ìˆ˜ë¥¼ ë°˜ë³µ ì‹¤í–‰í•œë‹¤.
- setImmediate(ì½œë°± í•¨ìˆ˜): ì½œë°± í•¨ìˆ˜ë¥¼ ì¦‰ì‹œ ì‹¤í–‰í•œë‹¤.

ì´ íƒ€ì´ë¨¸ í•¨ìˆ˜ë“¤ì€ ëª¨ë‘ ì•„ì´ë””ë¥¼ ë°˜í™˜í•œë‹¤. ì•„ì´ë””ë¥¼ ì‚¬ìš©í•˜ì—¬ íƒ€ì´ë¨¸ë¥¼ ì·¨ì†Œí•  ìˆ˜ ìˆë‹¤.

- clearTimeout(ì•„ì´ë””): setTimeoutì„ ì·¨ì†Œí•œë‹¤.
- clearInterval(ì•„ì´ë””): setIntervalì„ ì·¨ì†Œí•œë‹¤.
- clearImmediate(ì•„ì´ë””): setImmediateë¥¼ ì·¨ì†Œí•œë‹¤.

ë‹¤ìŒì€ ìœ„ ë©”ì†Œë“œë“¤ì„ ì‚¬ìš©í•œ ì½”ë“œì´ë‹¤. ì½”ë“œì˜ ì‹¤í–‰ ìˆœì„œë¥¼ ì˜ˆì¸¡í•´ë³´ì.

> timer.js

```js
const timeout = setTimeout(() => {
  console.log("1.5ì´ˆ í›„ ì‹¤í–‰");
}, 1500);

const interval = setInterval(() => {
  console.log("1ì´ˆë§ˆë‹¤ ì‹¤í–‰");
}, 1000);

const timeout2 = setTimeout(() => {
  console.log("ì‹¤í–‰ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤");
}, 3000);

setTimeout(() => {
  clearTimeout(timeout2);
  clearInterval(interval);
}, 2500);

const immediate = setImmediate(() => {
  console.log("ì¦‰ì‹œ ì‹¤í–‰");
});

const immediate2 = setImmediate(() => {
  console.log("ì‹¤í–‰ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤");
});

clearImmediate(immediate2);
```

ìš°ì„ , ì œì¼ ë¨¼ì € ì‹¤í–‰ë˜ëŠ” ê²ƒì€ immediateì´ë‹¤. immediate2ëŠ” ë°”ë¡œ clearImmediateë¥¼ ì‚¬ìš©í•´ì„œ ì·¨ì†Œí–ˆìœ¼ë¯€ë¡œ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤. ì½”ë“œ ì‹¤í–‰ 1ì´ˆ í›„ì—ëŠ” intervalì˜ ì½œë°±ì´ ì‹¤í–‰ëœë‹¤. ì½”ë“œ ì‹¤í–‰ 1.5ì´ˆ í›„ì—ëŠ” timeoutì˜ ì½œë°±ì´ ì‹¤í–‰ë  ê²ƒì´ë‹¤. intervalì˜ ì½œë°±ì€ 1ì´ˆë§ˆë‹¤ ì‹¤í–‰ë˜ë¯€ë¡œ ì½”ë“œ ì‹¤í–‰ í›„ 2ì´ˆê°€ ì§€ë‚¬ì„ ë•Œë„ ì½œë°±ì´ ì‹¤í–‰ëœë‹¤. 2.5ì´ˆê°€ ì§€ë‚¬ì„ ë•Œ clearTimeoutê³¼ clearIntervalì´ ê°ê° timeout2ì™€ intervalì„ ì·¨ì†Œí•œë‹¤. ë”°ë¼ì„œ ì½”ë“œ ì‹¤í–‰ 3ì´ˆ í›„ì—ëŠ” ë¡œê·¸ê°€ ì•„ë¬´ê²ƒë„ ë‚¨ì§€ ì•ŠëŠ”ë‹¤.

> Note: setImmediate(ì½œë°±)ê³¼ setTimeout(ì½œë°±, 0)
>
> setImmediate(ì½œë°±)ê³¼ setTimeout(ì½œë°±, 0)ì— ë‹´ê¸´ ì½œë°± í•¨ìˆ˜ëŠ” ì´ë²¤íŠ¸ ë£¨í”„ë¥¼ ê±°ì¹œ ë’¤ ì¦‰ì‹œ ì‹¤í–‰ëœë‹¤. ë‘˜ì˜ ì°¨ì´ì ì€ ë¬´ì—‡ì¼ê¹Œ? íŠ¹ìˆ˜í•œ ê²½ìš°ì— setImmediateëŠ” setTimeout(ì½œë°±, 0)ë³´ë‹¤ ë¨¼ì € ì‹¤í–‰ëœë‹¤. íŒŒì¼ ì‹œìŠ¤í…œ ì ‘ê·¼, ë„¤íŠ¸ì›Œí‚¹ê°™ì€ I/O ì‘ì—…ì˜ ì½œë°± í•¨ìˆ˜ ì•ˆì—ì„œ íƒ€ì´ë¨¸ë¥¼ í˜¸ì¶œí•˜ëŠ” ê²½ìš°ì´ë‹¤. í•˜ì§€ë§Œ setImmediateê°€ í•­ìƒ setTimeout(ì½œë°±, 0)ë³´ë‹¤ ë¨¼ì € í˜¸ì¶œë˜ì§€ëŠ” ì•ŠëŠ”ë‹¤ëŠ” ì‚¬ì‹¤ë§Œ ì•Œì•„ë‘ì. í—·ê°ˆë¦¬ì§€ ì•Šë„ë¡ setTimeout(ì½œë°±, 0)ì€ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²ƒì„ ê¶Œì¥í•œë‹¤.

#### 3-4-4. **filename, **dirname

ë…¸ë“œì—ì„œëŠ” íŒŒì¼ ì‚¬ì´ì— ëª¨ë“ˆ ê´€ê³„ê°€ ìˆëŠ” ê²½ìš°ê°€ ë§ìœ¼ë¯€ë¡œ ë•Œë¡œëŠ” í˜„ì¬ì˜ íŒŒì¼ ê²½ë¡œë‚˜ íŒŒì¼ëª…ì„ ì•Œì•„ì•¼ í•œë‹¤. ë…¸ë“œëŠ” `__filename`, `__dirname`ì´ë¼ëŠ” í‚¤ì›Œë“œë¡œ ê²½ë¡œì— ëŒ€í•œ ì •ë³´ë¥¼ ì œê³µí•œë‹¤. íŒŒì¼ì— `__filename`ê³¼ `__dirname`ì„ ë„£ì–´ë‘ë©´ ì‹¤í–‰ ì‹œ í˜„ì¬ íŒŒì¼ëª…ê³¼ í˜„ì¬ íŒŒì¼ ê²½ë¡œë¡œ ë°”ë€ë‹¤.

> filename.js

```js
console.log(__filename);
console.log(__dirname);
```

> ì½˜ì†”

```
$ node filename.js
/Users/sangminpark/Desktop/2021/JavaScript/Node.js/timer.js
/Users/sangminpark/Desktop/2021/JavaScript/Node.js
```

ê²½ë¡œëŠ” ê°ìì˜ ê²½ë¡œë¡œ ë‚˜ì˜¬ ê²ƒì´ë‹¤. ë˜í•œ, ìœˆë„ìš°ê°€ ì•„ë‹ˆë¼ë©´ \ëŒ€ì‹  /ë¡œ í´ë” ê²½ë¡œê°€ êµ¬ë¶„ë  ìˆ˜ ìˆë‹¤. ì´ë ‡ê²Œ ì–»ì€ ì •ë³´ë¥¼ ì‚¬ìš©í•´ì„œ ê²½ë¡œ ì²˜ë¦¬ë¥¼ í•  ìˆ˜ë„ ìˆë‹¤. í•˜ì§€ë§Œ ê²½ë¡œê°€ ë¬¸ìì—´ë¡œ ë³€í™˜ë˜ê¸°ë„ í•˜ê³ , \ë‚˜ /ê°™ì€ ê²½ë¡œ êµ¬ë¶„ì ë¬¸ì œë„ ìˆìœ¼ë¯€ë¡œ ë³´í†µì€ ì´ë¥¼ í•´ê²°í•´ì£¼ëŠ” path ëª¨ë“ˆ(3.5.2)ê³¼ í•¨ê»˜ ì“´ë‹¤.

#### 3-4-5. module, exports, require

ì§€ê¸ˆê¹Œì§€ëŠ” ëª¨ë“ˆì„ ë§Œë“¤ ë•Œ `module.exports`ë§Œ ì‚¬ìš©í–ˆëŠ”ë°, module ê°ì²´ ë§ê³  exports ê°ì²´ë¡œë„ ëª¨ë“ˆì„ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

3.3ì˜ var.jsë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•´ë„ index.jsì—ì„œëŠ” ë™ì¼í•˜ê²Œ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆë‹¤.

> var.js (ìˆ˜ì • ì „)

```js
const odd = "í™€ìˆ˜";
const even = "ì§ìˆ˜";

module.exports = {
  odd,
  even,
};
```

> var.js

```js
exports.odd = "í™€ìˆ˜";
exports.even = "ì§ìˆ˜";
```

index.jsëŠ” ê¸°ì¡´ê³¼ ê°™ë‹¤. í¸ì˜ë¥¼ ìœ„í•´ ë‹¤ì‹œ ì ëŠ”ë‹¤.

> index.js

```js
const { odd, even } = require("./var");
const checkNumber = require("./func");

checkStringOddOrEven = (str) => {
  if (str.length % 2) {
    // í™€ìˆ˜ë©´
    return odd;
  }
  return even;
};

console.log(checkNumber(10));
console.log(checkStringOddOrEven("hello"));
```

> ì½˜ì†”

```
$ node index
ì§ìˆ˜
í™€ìˆ˜
```

`module.exports`ë¡œ í•œ ë²ˆì— ëŒ€ì…í•˜ëŠ” ëŒ€ì‹ , ê°ê°ì˜ ë³€ìˆ˜ë¥¼ exports ê°ì²´ì— í•˜ë‚˜ì”© ë„£ì—ˆë‹¤. ë™ì¼í•˜ê²Œ ë™ì‘í•˜ëŠ” ì´ìœ ëŠ” `module.exports`ì™€ exportsê°€ ê°™ì€ ê°ì²´ë¥¼ ì°¸ì¡°í•˜ê¸° ë•Œë¬¸ì´ë‹¤. ì‹¤ì œë¡œ `console.log(module.exports === exports)`ë¥¼ í•˜ë©´ trueê°€ ë‚˜ì˜¨ë‹¤. ë”°ë¼ì„œ exports ê°ì²´ì— add í•¨ìˆ˜ë¥¼ ë„£ìœ¼ë©´ `module.exports`ì—ë„ add í•¨ìˆ˜ê°€ ë“¤ì–´ê°„ë‹¤.

> **ğŸš«Warning: exports ê°ì²´ ì‚¬ìš© ì‹œ**
>
> exports ê°ì²´ë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” `module.exports`ì™€ì˜ ì°¸ì¡° ê´€ê³„ê°€ ê¹¨ì§€ì§€ ì•Šë„ë¡ ì£¼ì˜í•´ì•¼ í•œë‹¤. `module.exports`ì—ëŠ” ì–´ë–¤ ê°’ì´ë“  ëŒ€ì…í•´ë„ ë˜ì§€ë§Œ, exportsì—ëŠ” ë°˜ë“œì‹œ ê°ì²´ì²˜ëŸ¼ ì†ì„±ëª…ê³¼ ì†ì„±ê°’ì„ ëŒ€ì…í•´ì•¼ í•œë‹¤. exportsì— ë‹¤ë¥¸ ê°’ì„ ëŒ€ì…í•˜ë©´ ê°ì²´ì˜ ì°¸ì¡° ê´€ê³„ê°€ ëŠê²¨ ë”ì´ìƒ ëª¨ë“ˆë¡œ ê¸°ëŠ¥í•˜ì§€ ì•ŠëŠ”ë‹¤.
> exportsë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” ê°ì²´ë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ func.jsì™€ ê°™ì´ `module.exports`ì— í•¨ìˆ˜ë¥¼ ëŒ€ì…í•œ ê²½ìš°ì—ëŠ” exportsë¡œ ë°”ê¿€ ìˆ˜ ì—†ë‹¤.
> exportsì™€ `module.exports`ì—ëŠ” ì°¸ì¡° ê´€ê³„ê°€ ìˆìœ¼ë¯€ë¡œ í•œ ëª¨ë“ˆì— exports ê°ì²´ì™€ `module.exports`ë¥¼ ë™ì‹œì— ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²ƒì´ ì¢‹ë‹¤.
>
> Note: ë…¸ë“œì—ì„œ thisëŠ” ë¬´ì—‡ì¼ê¹Œ?
>
> ë…¸ë“œì—ì„œ thisë¥¼ ì‚¬ìš©í•  ë•Œ ì£¼ì˜í•´ì•¼ í•  ì ì´ ìˆë‹¤.
>
> this.js
>
> ```js
> console.log(this);
> console.log(this === module.exports);
> console.log(this === exports);
> whatIsThis = () => {
>   console.log("function", this === exports, this === global);
> };
> whatIsThis();
> ```
>
> ì½˜ì†”
>
> ```
> $ node this
> {}
> true
> true
> function false true
> ```
>
> ë‹¤ë¥¸ ë¶€ë¶„ì€ ë¸Œë¼ìš°ì €ì˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ì™€ ë™ì¼í•˜ì§€ë§Œ ìµœìƒìœ„ ìŠ¤ì½”í”„ì— ì¡´ì¬í•˜ëŠ” thisëŠ” `module.exports`(ë˜ëŠ” exports ê°ì²´)ë¥¼ ê°€ë¦¬í‚¨ë‹¤. ë˜í•œ, í•¨ìˆ˜ ì„ ì–¸ë¬¸ ë‚´ë¶€ì˜ thisëŠ” global ê°ì²´ë¥¼ ê°€ë¦¬í‚¨ë‹¤.

ì´ë²ˆì—ëŠ” ëª¨ë“ˆì„ ë¶ˆëŸ¬ì˜¤ëŠ” `require`ì— ëŒ€í•´ ì•Œì•„ë³´ì. `require`ì€ í•¨ìˆ˜ì´ê³ , í•¨ìˆ˜ëŠ” ê°ì²´ì´ë¯€ë¡œ `require`ì€ ê°ì²´ë¡œì„œ ëª‡ ê°€ì§€ ì†ì„±ì„ ê°–ê³  ìˆë‹¤. ê·¸ì¤‘ì—ì„œ `require.cache`ì™€ `require.main`ì— ëŒ€í•´ ì•Œì•„ë³´ì.

var.jsê°€ ìˆëŠ” ê³³ì— require.jsë¥¼ ë§Œë“¤ì.

> require.js

```js
console.log("requireê°€ ê°€ì¥ ìœ„ì— ì˜¤ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤.");

module.exports = "ì €ë¥¼ ì°¾ì•„ë³´ì„¸ìš”";

require("./var");

console.log("require.cacheì…ë‹ˆë‹¤.");
console.log(require.cache);
console.log("require.mainì…ë‹ˆë‹¤.");
console.log(require.main === module);
console.log(require.main.feature);
```

> ì½˜ì†”

```
sangminpark@Sangminui-MacBookPro-16 Node.js % node require
requireê°€ ê°€ì¥ ìœ„ì— ì˜¤ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤.
require.cacheì…ë‹ˆë‹¤.
[Object: null prototype] {
'/Users/sangminpark/Desktop/2021/JavaScript/Node.js/require.js': Module {
id: '.',
path: '/Users/sangminpark/Desktop/2021/JavaScript/Node.js',
exports: 'ì €ë¥¼ ì°¾ì•„ë³´ì„¸ìš”',
parent: null,
filename: '/Users/sangminpark/Desktop/2021/JavaScript/Node.js/require.js',
loaded: false,
children: [ [Module] ],
paths: [
'/Users/sangminpark/Desktop/2021/JavaScript/Node.js/node_modules',
'/Users/sangminpark/Desktop/2021/JavaScript/node_modules',
'/Users/sangminpark/Desktop/2021/node_modules',
'/Users/sangminpark/Desktop/node_modules',
'/Users/sangminpark/node_modules',
'/Users/node_modules',
'/node_modules'
]
},
'/Users/sangminpark/Desktop/2021/JavaScript/Node.js/var.js': Module {
id: '/Users/sangminpark/Desktop/2021/JavaScript/Node.js/var.js',
path: '/Users/sangminpark/Desktop/2021/JavaScript/Node.js',
exports: { odd: 'í™€ìˆ˜', even: 'ì§ìˆ˜' },
parent: Module {
id: '.',
path: '/Users/sangminpark/Desktop/2021/JavaScript/Node.js',
exports: 'ì €ë¥¼ ì°¾ì•„ë³´ì„¸ìš”',
parent: null,
filename: '/Users/sangminpark/Desktop/2021/JavaScript/Node.js/require.js',
loaded: false,
children: [Array],
paths: [Array]
},
filename: '/Users/sangminpark/Desktop/2021/JavaScript/Node.js/var.js',
loaded: true,
children: [],
paths: [
'/Users/sangminpark/Desktop/2021/JavaScript/Node.js/node_modules',
'/Users/sangminpark/Desktop/2021/JavaScript/node_modules',
'/Users/sangminpark/Desktop/2021/node_modules',
'/Users/sangminpark/Desktop/node_modules',
'/Users/sangminpark/node_modules',
'/Users/node_modules',
'/node_modules'
]
}
}
require.mainì…ë‹ˆë‹¤.
true
undefined
```

ìœ„ ì˜ˆì œì—ì„œ ì•Œì•„ì•¼ í•  ì ì€, `require`ì´ ë°˜ë“œì‹œ íŒŒì¼ ìµœìƒë‹¨ì— ìœ„ì¹˜í•  í•„ìš”ê°€ ì—†ê³ , `module.exports`ë„ ìµœí•˜ë‹¨ì— ìœ„ì¹˜í•  í•„ìš”ê°€ ì—†ë‹¤ëŠ” ê²ƒì´ë‹¤. ì•„ë¬´ ê³³ì—ì„œë‚˜ ì‚¬ìš©í•´ë„ ëœë‹¤.

`require.cache` ê°ì²´ì— require.jsë‚˜ var.js ê°™ì€ íŒŒì¼ ì´ë¦„ì´ ì†ì„±ëª…ìœ¼ë¡œ ë“¤ì–´ê°€ ìˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. ì†ì„±ê°’ìœ¼ë¡œëŠ” ê° íŒŒì¼ì˜ ëª¨ë“ˆ ê°ì²´ê°€ ë“¤ì–´ ìˆë‹¤. í•œë²ˆ requireí•œ íŒŒì¼ì€ require.cacheì— ì €ì¥ë˜ë¯€ë¡œ ë‹¤ìŒ ë²ˆì— requireí•  ë•ŒëŠ” ìƒˆë¡œ ë¶ˆëŸ¬ì˜¤ì§€ ì•Šê³  require.cacheì— ìˆëŠ” ê²ƒì´ ì¬ì‚¬ìš©ëœë‹¤.

ë§Œì•½ ìƒˆë¡œ requireí•˜ê¸¸ ì›í•œë‹¤ë©´, require.cacheì˜ ì†ì„±ì„ ì œê±°í•˜ë©´ ëœë‹¤. ë‹¤ë§Œ, í”„ë¡œê·¸ë¨ì˜ ë™ì‘ì´ ê¼¬ì¼ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ê¶Œì¥í•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤. ì†ì„±ì„ ìì„¸íˆ ì‚´í´ë³´ë©´ module.exportsí–ˆë˜ ë¶€ë¶„(exports)ì´ë‚˜ ë¡œë”© ì—¬ë¶€(loaded), ë¶€ëª¨(parent), ìì‹(children) ëª¨ë“ˆ ê´€ê³„ë¥¼ ì°¾ì„ ìˆ˜ ìˆë‹¤.

require.mainì€ ë…¸ë“œ ì‹¤í–‰ ì‹œ ì²« ëª¨ë“ˆì„ ê°€ë¦¬í‚¨ë‹¤. í˜„ì¬ node requireë¡œ ì‹¤í–‰í–ˆìœ¼ë¯€ë¡œ require.jsê°€ require.mainì´ ëœë‹¤. require.main ê°ì²´ì˜ ëª¨ì–‘ì€ require.cacheì˜ ëª¨ë“ˆ ê°ì²´ì™€ ê°™ë‹¤. í˜„ì¬ íŒŒì¼ì´ ì²« ëª¨ë“ˆì¸ì§€ ì•Œì•„ë³´ë ¤ë©´ require.main === moduleì„ í•´ë³´ë©´ ëœë‹¤. node requireë¡œ ì‹¤í–‰í•œ ê²½ìš°, var.jsì—ì„œ require.main === moduleì„ ì‹¤í–‰í•˜ë©´ falseê°€ ë°˜í™˜ë  ê²ƒì´ë‹¤. ì²« ëª¨ë“ˆì˜ ì´ë¦„ì„ ì•Œì•„ë³´ë ¤ë©´ require.main.filenameìœ¼ë¡œ í™•ì¸í•˜ë©´ ëœë‹¤.

ëª¨ë“ˆì„ ì‚¬ìš©í•  ë•Œ ì£¼ì˜í•´ì•¼ í•  ì ì´ ìˆë‹¤. ë§Œì•½ ë‘ ëª¨ë“ˆ `dep1`ê³¼ `dep2`ê°€ ìˆê³  ì´ ë‘˜ì´ ì„œë¡œë¥¼ requireí•œë‹¤ë©´ ì–´ë–»ê²Œ ë ê¹Œ?

> dep1.js

```js
const dep2 = require("./dep2");
console.log("require dep2", dep2);
module.exports = () => {
  console.log("dep2", dep2);
};
```

> dep2.js

```js
const dep1 = require("./dep1");
console.log("require dep1", dep1);
module.exports = () => {
  console.log("dep1", dep1);
};
```

dep-run.jsë¥¼ ë§Œë“¤ì–´ì„œ ë‘ ëª¨ë“ˆì„ ì‹¤í–‰í•´ë³´ì.

> dep-run.js

```js
const dep1 = require("./dep1");
const dep2 = require("./dep2");
dep1();
dep2();
```

ì½”ë“œê°€ ìœ„ì—ì„œë¶€í„° ì‹¤í–‰ë˜ë¯€ë¡œ `require('./dep1')`ì´ ë¨¼ì € ì‹¤í–‰ëœë‹¤. dep1.jsì—ì„œëŠ” ì œì¼ ë¨¼ì € `require('./dep2');`ì´ ì‹¤í–‰ë˜ëŠ”ë°, ë‹¤ì‹œ dep2.jsì—ì„œëŠ” `require('./dep1');`ì´ ì‹¤í–‰ëœë‹¤. ì´ ê³¼ì •ì´ ê³„ì† ë°˜ë³µë˜ë¯€ë¡œ ì–´ë–»ê²Œ ë ì§€ ê¶ê¸ˆí•  ê²ƒì´ë‹¤. ì‹¤í–‰í•´ ë³´ì.

> ì½˜ì†”

```
$ node dep-run
require dep1 {}
require dep2 [Function (anonymous)]
dep2 [Function (anonymous)]
dep1 {}
(node:29044) Warning: Accessing non-existent property 'Symbol(nodejs.util.inspect.custom)' of module exports inside circular dependency (Use `node --trace-warnings ...` to show where the warning was created)
```

ë†€ëê²Œë„ dep1ì˜ module.exportsê°€ í•¨ìˆ˜ê°€ ì•„ë‹ˆë¼ ë¹ˆ ê°ì²´ë¡œ í‘œì‹œëœë‹¤. ì´ëŸ¬í•œ í˜„ìƒì„ ìˆœí™˜ ì°¸ì¡°(circular dependency)ë¼ê³  ë¶€ë¥¸ë‹¤. ì´ë ‡ê²Œ ìˆœí™˜ ì°¸ì¡°ê°€ ìˆì„ ê²½ìš°ì—ëŠ” ìˆœí™˜ ì°¸ì¡°ë˜ëŠ” ëŒ€ìƒì„ ë¹ˆ ê°ì²´ë¡œ ë§Œë“ ë‹¤. ì´ë•Œ ì—ëŸ¬ê°€ ë°œìƒí•˜ì§€ ì•Šê³  ì¡°ìš©íˆ ë¹ˆ ê°ì²´ë¡œ ë³€ê²½ë˜ë¯€ë¡œ ì˜ˆê¸°ì¹˜ ëª»í•œ ë™ì‘ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ ìˆœí™˜ ì°¸ì¡°ê°€ ë°œìƒí•˜ì§€ ì•Šë„ë¡ êµ¬ì¡°ë¥¼ ì˜ ì¡ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤.

#### 3-4-5. process

`process` ê°ì²´ëŠ” í˜„ì¬ ì‹¤í–‰ë˜ê³  ìˆëŠ” ë…¸ë“œ í”„ë¡œì„¸ìŠ¤ì— ëŒ€í•œ ì •ë³´ë¥¼ ë‹´ê³  ìˆë‹¤. `process` ê°ì²´ ì•ˆì—ëŠ” ë‹¤ì–‘í•œ ì†ì„±ì´ ìˆëŠ”ë°, í•˜ë‚˜ì”© REPLì— ë”°ë¼ ì…ë ¥í•´ë³´ì. ê²°ê´ê°’ì€ ì‚¬ìš©ìì˜ ì»´í“¨í„°ë§ˆë‹¤ ì°¨ì´ê°€ ìˆì„ ìˆ˜ ìˆë‹¤.

> ì½˜ì†”

```
sangminpark@Sangminui-MacBookPro-16 Node.js % node
Welcome to Node.js v14.15.5.
Type ".help" for more information.
> process.version
'v14.15.5' // ì„¤ì¹˜ëœ ë…¸ë“œì˜ ë²„ì „ì´ë‹¤.
> process.arch
'x64' // í”„ë¡œì„¸ì„œ ì•„í‚¤í…ì²˜ ì •ë³´ì´ë‹¤. arm, ia32 ë“±ì˜ ê°’ì¼ ìˆ˜ë„ ìˆë‹¤.
> process.platform
'darwin' // ìš´ì˜ì²´ì œ í”Œë«í¼ ì •ë³´ì´ë‹¤. linuxë‚˜ win32, freebsdë“±ì˜ ê°’ì¼ ìˆ˜ë„ ìˆë‹¤.
> process.pid
20823 // í˜„ì¬ í”„ë¡œì„¸ìŠ¤ì˜ ì•„ì´ë””ì´ë‹¤. í”„ë¡œì„¸ìŠ¤ë¥¼ ì—¬ëŸ¬ ê°œ ê°€ì§ˆ ë•Œ êµ¬ë¶„í•  ìˆ˜ ìˆë‹¤.
> process.uptime()
27.46315772 // í”„ë¡œì„¸ìŠ¤ê°€ ì‹œì‘ëœ í›„ íë¥¸ ì‹œê°„ì´ë‹¤. ë‹¨ìœ„ëŠ” ì´ˆì´ë‹¤.
> process.execPath
'/Users/sangminpark/.nvm/versions/node/v14.15.5/bin/node' // ë…¸ë“œì˜ ê²½ë¡œì´ë‹¤.
> process.cwd()
'/Users/sangminpark/Desktop/2021/JavaScript/Node.js' // í˜„ì¬ í”„ë¡œì„¸ìŠ¤ê°€ ì‹¤í–‰ë˜ëŠ” ìœ„ì¹˜ì´ë‹¤.
> process.cpuUsage()
{ user: 323888, system: 122174 } // í˜„ì¬ CPU ì‚¬ìš©ëŸ‰ì´ë‹¤.
```

ì´ ì •ë³´ë“¤ì˜ ì‚¬ìš© ë¹ˆë„ëŠ” ê·¸ë¦¬ ë†’ì§€ ì•Šì§€ë§Œ, ì¼ë°˜ì ìœ¼ë¡œ ìš´ì˜ì²´ì œë‚˜ ì‹¤í–‰ í™˜ê²½ë³„ë¡œ ë‹¤ë¥¸ ë™ì‘ì„ í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•œë‹¤. `process.env`ì™€ `process.nextTick`, `process.exit()`ì€ ì¤‘ìš”í•˜ë‹ˆ ë”°ë¡œ ì„¤ëª…í•œë‹¤.

##### 3-4-6-1. process.env

REPLì— process.envë¥¼ ì…ë ¥í•˜ë©´ ë§¤ìš° ë§ì€ ì •ë³´ê°€ ì¶œë ¥ëœë‹¤. ìì„¸íˆ ë³´ë©´ ì´ ì •ë³´ë“¤ì´ ì‹œìŠ¤í…œì˜ í™˜ê²½ ë³€ìˆ˜ì„ì„ ì•Œ ìˆ˜ ìˆë‹¤. ì‹œìŠ¤í…œ í™˜ê²½ ë³€ìˆ˜ëŠ” ë…¸ë“œì— ì§ì ‘ ì˜í–¥ì„ ë¯¸ì¹˜ê¸°ë„ í•œë‹¤. ëŒ€í‘œì ì¸ ê²ƒìœ¼ë¡œ `UV_THREADPOOL_SIZE`ì™€ `NODE_OPTIONS`ê°€ ìˆë‹¤.

```
NODE_OPTIONS=--max-old-space-size=8192
UV_THREADPOOL_SIZE=8
```

ì™¼ìª½ì´ í™˜ê²½ ë³€ìˆ˜ì˜ ì´ë¦„ì´ê³  ì˜¤ë¥¸ìª½ì´ ê°’ì´ë‹¤. `NODE_OPTIONS`ëŠ” ë…¸ë“œë¥¼ ì‹¤í–‰í•  ë•Œì˜ ì˜µì…˜ë“¤ì„ ì…ë ¥ë°›ëŠ” í™˜ê²½ ë³€ìˆ˜ì´ë‹¤. `--max-old-space-size=8192`ëŠ” ë…¸ë“œì˜ ë©”ëª¨ë¦¬ë¥¼ 8GBê¹Œì§€ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•œë‹¤. ì˜µì…˜ì´ ë‹¤ì–‘í•˜ê²Œ ì¡´ì¬í•˜ë¯€ë¡œ 3.9ì ˆì— NODE_OPTIONSì— ëŒ€í•œ ë§í¬ê°€ ìˆë‹¤. `UV_THREADPOOL_SIZE`ëŠ” ë…¸ë“œì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ìŠ¤ë ˆë“œí’€ì˜ ìŠ¤ë ˆë“œ ê°œìˆ˜ë¥¼ ì¡°ì ˆí•  ìˆ˜ ìˆê²Œ í•œë‹¤. 3.6.4ì ˆì—ì„œ ìì„¸íˆ ì•Œì•„ë³¸ë‹¤.

ì‹œìŠ¤í…œ í™˜ê²½ ë³€ìˆ˜ ì™¸ì—ë„ ê°ìê°€ ì„ì˜ë¡œ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì €ì¥í•  ìˆ˜ ìˆë‹¤. `process.env`ëŠ” ì„œë¹„ìŠ¤ì˜ ì¤‘ìš”í•œ í‚¤ë¥¼ ì €ì¥í•˜ëŠ” ê³µê°„ìœ¼ë¡œë„ ì‚¬ìš©ëœë‹¤. ì„œë²„ë‚˜ ë°ì´í„°ë² ì´ìŠ¤ì˜ ë¹„ë°€ë²ˆí˜¸ì™€ ê°ì¢… API í‚¤ë¥¼ ì½”ë“œì— ì§ì ‘ ì…ë ¥í•˜ëŠ” ê²ƒì€ ìœ„í—˜í•˜ë‹¤. í˜¹ì—¬ ì„œë¹„ìŠ¤ê°€ í•´í‚¹ì„ ë‹¹í•´ ì½”ë“œê°€ ìœ ì¶œë˜ì—ˆì„ ë•ŒëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì½”ë“œì— ë‚¨ì•„ ìˆì–´ ì¶”ê°€ í”¼í•´ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.

ë”°ë¼ì„œ ì¤‘ìš”í•œ ë¹„ë°€ë²ˆí˜¸ëŠ” ë‹¤ìŒê³¼ ê°™ì´ process.envì˜ ì†ì„±ìœ¼ë¡œ ëŒ€ì²´í•œë‹¤.

```
const secretId = process.env.SECRET_ID;
const secretCode = process.env.SECRET_CODE;
```

ì´ì œ `process.env`ì— ì§ì ‘ SECRET_IDì™€ SECRET_CODEë¥¼ ë„£ìœ¼ë©´ ëœë‹¤. ë„£ëŠ” ë°©ë²•ì€ ìš´ì˜ì²´ì œë§ˆë‹¤ ì°¨ì´ê°€ ìˆë‹¤. í•˜ì§€ë§Œ í•œ ë²ˆì— ëª¨ë“  ìš´ì˜ì²´ì œì— ë™ì¼í•˜ê²Œ ë„£ì„ ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ìˆë‹¤. 6.2ì ˆì—ì„œ dotenvë¥¼ ì‚¬ìš©í•  ë•Œ ë°°ìš´ë‹¤.

##### 3-4-6-2. process.nextTick(ì½œë°±)

ì´ë²¤íŠ¸ ë£¨í”„ê°€ ë‹¤ë¥¸ ì½œë°± í•¨ìˆ˜ë“¤ë³´ë‹¤ nextTickì˜ ì½œë°± í•¨ìˆ˜ë¥¼ ìš°ì„ ìœ¼ë¡œ ì²˜ë¦¬í•˜ë„ë¡ ë§Œë“ ë‹¤.

> nextTick.js

```js
setImmediate(() => {
  console.log("immediate");
});

process.nextTick(() => {
  console.log("nextTick");
});

setTimeout(() => {
  console.log("timeout");
}, 0);

Promise.resolve().then(() => console.log("promise"));
```

process.nextTickì€ setImmediateë‚˜ setTimeoutë³´ë‹¤ ë¨¼ì € ì‹¤í–‰ëœë‹¤. ì½”ë“œ ë§¨ ë°‘ì— Promiseë¥¼ ë„£ì€ ê²ƒì€ resolveëœ Promiseë„ nextTickì²˜ëŸ¼ ë‹¤ë¥¸ ì½œë°±ë“¤ë³´ë‹¤ ìš°ì„ ì‹œë˜ê¸° ë•Œë¬¸ì´ë‹¤. ê·¸ë˜ì„œ process.nextTickê³¼ Promiseë¥¼ ë§ˆì´í¬ë¡œíƒœìŠ¤í¬(microtask)ë¼ê³  ë”°ë¡œ êµ¬ë¶„ì§€ì–´ ë¶€ë¥¸ë‹¤.

> ì½˜ì†”

```
sangminpark@Sangminui-MacBookPro-16 Node.js % node nextTick
nextTick
promise
timeout
immediate
```

> **ğŸš« Warning ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ì˜ ì¬ê·€ í˜¸ì¶œ**
>
> process.nextTickìœ¼ë¡œ ë°›ì€ ì½œë°± í•¨ìˆ˜ë‚˜ resolveëœ PromiseëŠ” ë‹¤ë¥¸ ì´ë²¤íŠ¸ ë£¨í”„ì—ì„œ ëŒ€ê¸°í•˜ëŠ” ì½œë°± í•¨ìˆ˜ë³´ë‹¤ë„ ë¨¼ì € ì‹¤í–‰ëœë‹¤. ê·¸ë˜ì„œ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ í•  ë•Œ setImmediateë³´ë‹¤ process.nextTickì„ ë” ì„ í˜¸í•˜ëŠ” ê°œë°œìë„ ìˆë‹¤. í•˜ì§€ë§Œ ì´ëŸ° ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ë¥¼ ì¬ê·€ í˜¸ì¶œí•˜ê²Œ ë˜ë©´ ì´ë²¤íŠ¸ ë£¨í”„ëŠ” ë‹¤ë¥¸ ì½œë°± í•¨ìˆ˜ë³´ë‹¤ ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ë¥¼ ìš°ì„ í•˜ì—¬ ì²˜ë¦¬í•˜ë¯€ë¡œ ì½œë°± í•¨ìˆ˜ë“¤ì´ ì‹¤í–‰ë˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆë‹¤.

##### 3-4-6-3. process.exit(ì½”ë“œ)

ì‹¤í–‰ì¤‘ì¸ ë…¸ë“œ í”„ë¡œì„¸ìŠ¤ë¥¼ ì¢…ë£Œí•œë‹¤. ì„œë²„ í™˜ê²½ì—ì„œ ì´ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ ì„œë²„ê°€ ë©ˆì¶”ë¯€ë¡œ íŠ¹ìˆ˜í•œ ê²½ìš°ë¥¼ ì œì™¸í•˜ê³ ëŠ” ì„œë²„ì—ì„œ ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤. í•˜ì§€ë§Œ ì„œë²„ ì™¸ì˜ ë…ë¦½ì ì¸ í”„ë¡œê·¸ë¨ì—ì„œëŠ” ìˆ˜ë™ìœ¼ë¡œ ë…¸ë“œë¥¼ ë©ˆì¶”ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤.

setIntervalë¡œ ë°˜ë³µë˜ê³  ìˆëŠ” ì½”ë“œë¥¼ process.exit()ìœ¼ë¡œ ë©ˆì¶° ë³´ì.

> exit.js

```js
let i = 1;
setInterval(() => {
  if (i === 5) {
    console.log("ì¢…ë£Œ");
    process.exit();
  }
  console.log(i);
  i += 1;
}, 1000);
```

1ë¶€í„° 4ê¹Œì§€ í‘œì‹œí•œ ë’¤, iê°€ 5ê°€ ë˜ì—ˆì„ ë•Œ ì¢…ë£Œí•˜ë„ë¡ í–ˆë‹¤.

> ì½˜ì†”

```
$ node exit
1
2
3
4
ì¢…ë£Œ
```

process.exit ë©”ì„œë“œëŠ” ì¸ìˆ˜ë¡œ ì½”ë“œ ë²ˆí˜¸ë¥¼ ì¤„ ìˆ˜ ìˆë‹¤. ì¸ìˆ˜ë¥¼ ì£¼ì§€ ì•Šê±°ë‚˜ 0ì„ ì£¼ë©´ ì •ìƒ ì¢…ë£Œë¥¼ ëœ»í•˜ê³ , 1ì„ ì£¼ë©´ ë¹„ì •ìƒ ì¢…ë£Œë¥¼ ëœ»í•œë‹¤. ë§Œì•½ ì—ëŸ¬ê°€ ë°œìƒí•´ì„œ ì¢…ë£Œí•˜ëŠ” ê²½ìš°ì—ëŠ” 1ì„ ë„£ìœ¼ë©´ ëœë‹¤.

ì§€ê¸ˆê¹Œì§€ ìì£¼ ì“°ì´ëŠ” ë‚´ì¥ ê°ì²´ë¥¼ ì•Œì•„ë´¤ë‹¤. íƒ€ì´ë¨¸ì™€ ì½˜ì†”, í”„ë¡œì„¸ìŠ¤, ëª¨ë“ˆì€ ê¸°ë³¸ì ì¸ ê¸°ëŠ¥ì´ì§€ë§Œ ì•ìœ¼ë¡œë„ ê³„ì† ì‚¬ìš©ëœë‹¤.

ë˜í•œ, ë…¸ë“œëŠ” ì—¬ëŸ¬ ê°€ì§€ ê°•ë ¥í•œ ê¸°ëŠ¥ì„ ê¸°ë³¸ ëª¨ë“ˆë¡œ ì œê³µí•œë‹¤. ë‹¤ìŒ ì ˆì—ì„œëŠ” ë…¸ë“œê°€ ì–´ë–¤ ê¸°ëŠ¥ë“¤ì„ ì œê³µí•˜ëŠ”ì§€ ì•Œì•„ë³¼ ê²ƒì´ë‹¤.

### 3-5. ë…¸ë“œ ë‚´ì¥ ëª¨ë“ˆ ì‚¬ìš©í•˜ê¸°

ë…¸ë“œëŠ” ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ì‚¬ìš©í•˜ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ë³´ë‹¤ ë” ë§ì€ ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤. ìš´ì˜ì²´ì œ ì •ë³´ì—ë„ ì ‘ê·¼í•  ìˆ˜ ìˆê³ , í´ë¼ì´ì–¸íŠ¸ê°€ ìš”ì²­í•œ ì£¼ì†Œì— ëŒ€í•œ ì •ë³´ë„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤. ë…¸ë“œì—ì„œ ì´ëŸ¬í•œ ê¸°ëŠ¥ì„ í•˜ëŠ” ëª¨ë“ˆì„ ì œê³µí•œë‹¤.

ë…¸ë“œì˜ ëª¨ë“ˆì€ ë…¸ë“œ ë²„ì „ë§ˆë‹¤ ì°¨ì´ê°€ ìˆë‹¤. ë”°ë¼ì„œ ë²„ì „ê³¼ ìƒê´€ì—†ì´ ì•ˆì •ì ì´ê³  ìœ ìš©í•œ ê¸°ëŠ¥ì„ ì§€ë‹Œ ëª¨ë“ˆ ìœ„ì£¼ë¡œ ì‚´í´ë³¼ ì˜ˆì •ì´ë‹¤. ê³µì‹ë¬¸ì„œì— ëª¨ë‘ ë‚˜ì™€ ìˆëŠ” ë‚´ìš©ì´ì§€ë§Œ, ì¤‘ìš”í•˜ê³  ìì£¼ ì‚¬ìš©í•˜ëŠ” ê²ƒë“¤ë§Œ ì¶”ë ¸ë‹¤.

#### 3-5-1. os

ë¨¼ì € os ëª¨ë“ˆì´ë‹¤. ì›¹ ë¸Œë¼ìš°ì €ì— ì‚¬ìš©ë˜ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ìš´ì˜ì²´ì œì˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ì§€ë§Œ, ë…¸ë“œëŠ” os ëª¨ë“ˆì— ì •ë³´ê°€ ë‹´ê²¨ ìˆì–´ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.

os ëª¨ë“ˆì˜ ëŒ€í‘œì ì¸ ë©”ì†Œë“œë¥¼ ì•Œì•„ë³´ì.

> os.js

```js
const os = require("os");

console.log("ìš´ì˜ì²´ì œ ì •ë³´---------------------------------");
console.log("os.arch():", os.arch());
console.log("os.platform():", os.platform());
console.log("os.type():", os.type());
console.log("os.uptime():", os.uptime());
console.log("os.hostname():", os.hostname());
console.log("os.release():", os.release());

console.log("ê²½ë¡œ------------------------------------------");
console.log("os.homedir():", os.homedir());
console.log("os.tmpdir():", os.tmpdir());

console.log("cpu ì •ë³´--------------------------------------");
console.log("os.cpus():", os.cpus());
console.log("os.cpus().length:", os.cpus().length);

console.log("ë©”ëª¨ë¦¬ ì •ë³´-----------------------------------");
console.log("os.freemem():", os.freemem());
console.log("os.totalmem():", os.totalmem());
```

> ì½˜ì†”

```
ìš´ì˜ì²´ì œ ì •ë³´ ----------------
os.arch(): x64
os.platform(): darwin
os.type(): Darwin
os.uptime(): 729314
os.hostname(): Sangminui-MacBookPro-16.local
os.release(): 20.3.0
ê²½ë¡œ -------------------
os.homedir(): /Users/sangminpark
os.tmpdir(): /var/folders/d1/vw40p2ts29s963kgsw_14px40000gn/T
cpu ì •ë³´--------------------------------------
os.cpus(): [
  {
    model: 'Intel(R) Core(TM) i7-9750H CPU @ 2.60GHz',
    speed: 2600,
    times: { user: 45022850, nice: 0, sys: 26137930, idle: 221747710, irq: 0 }
  },
  {
    model: 'Intel(R) Core(TM) i7-9750H CPU @ 2.60GHz',
    speed: 2600,
    times: { user: 1549770, nice: 0, sys: 1469900, idle: 289732560, irq: 0 }
  },
  {
    model: 'Intel(R) Core(TM) i7-9750H CPU @ 2.60GHz',
    speed: 2600,
    times: { user: 41827380, nice: 0, sys: 19154920, idle: 231773810, irq: 0 }
  },
  {
    model: 'Intel(R) Core(TM) i7-9750H CPU @ 2.60GHz',
    speed: 2600,
    times: { user: 1536750, nice: 0, sys: 1248890, idle: 289966480, irq: 0 }
  },
  {
    model: 'Intel(R) Core(TM) i7-9750H CPU @ 2.60GHz',
    speed: 2600,
    times: { user: 34035530, nice: 0, sys: 14132390, idle: 244588000, irq: 0 }
  },
  {
    model: 'Intel(R) Core(TM) i7-9750H CPU @ 2.60GHz',
    speed: 2600,
    times: { user: 1552750, nice: 0, sys: 1134770, idle: 290064480, irq: 0 }
  },
  {
    model: 'Intel(R) Core(TM) i7-9750H CPU @ 2.60GHz',
    speed: 2600,
    times: { user: 29904890, nice: 0, sys: 11878410, idle: 250972420, irq: 0 }
  },
  {
    model: 'Intel(R) Core(TM) i7-9750H CPU @ 2.60GHz',
    speed: 2600,
    times: { user: 1565720, nice: 0, sys: 1049920, idle: 290136230, irq: 0 }
  },
  {
    model: 'Intel(R) Core(TM) i7-9750H CPU @ 2.60GHz',
    speed: 2600,
    times: { user: 22970930, nice: 0, sys: 8629800, idle: 261154800, irq: 0 }
  },
  {
    model: 'Intel(R) Core(TM) i7-9750H CPU @ 2.60GHz',
    speed: 2600,
    times: { user: 1536120, nice: 0, sys: 936810, idle: 290278800, irq: 0 }
  },
  {
    model: 'Intel(R) Core(TM) i7-9750H CPU @ 2.60GHz',
    speed: 2600,
    times: { user: 20211230, nice: 0, sys: 7155420, idle: 265388690, irq: 0 }
  },
  {
    model: 'Intel(R) Core(TM) i7-9750H CPU @ 2.60GHz',
    speed: 2600,
    times: { user: 1519030, nice: 0, sys: 856270, idle: 290376300, irq: 0 }
  }
]
os.cpus().length: 12
ë©”ëª¨ë¦¬ ì •ë³´-----------------------------------
os.freemem(): 320937984
os.totalmem(): 17179869184
```

process ê°ì²´ì™€ ê²¹ì¹˜ëŠ” ë¶€ë¶„ë„ ì¡°ê¸ˆ ë³´ì¸ë‹¤. ì‚¬ìš©ìì˜ ì»´í“¨í„° ìš´ì˜ì²´ì œë§ˆë‹¤ ë‹¤ ë‹¤ë¥´ë‹¤.

- os.arch(): process.archì™€ ë™ì¼í•˜ë‹¤.
- os.platform(): process.platformê³¼ ë™ì¼í•˜ë‹¤.
- os.type(): ìš´ì˜ì²´ì œì˜ ì¢…ë¥˜ë¥¼ ë³´ì—¬ì¤€ë‹¤.
- os.uptime(): ìš´ì˜ì²´ì œ ë¶€íŒ… ì´í›„ íë¥¸ ì‹œê°„(ì´ˆ)ì„ ë³´ì—¬ì¤€ë‹¤. process.uptime()ì€ ë…¸ë“œì˜ ì‹¤í–‰ ì‹œê°„ì´ì—ˆë‹¤.
- os.hostname(): ì»´í“¨í„°ì˜ ì´ë¦„ì„ ë³´ì—¬ì¤€ë‹¤.
- os.release(): ìš´ì˜ì²´ì œì˜ ë²„ì „ì„ ë³´ì—¬ì¤€ë‹¤.
- os.homedir(): í™ˆ ë””ë ‰í„°ë¦¬ ê²½ë¡œë¥¼ ë³´ì—¬ì¤€ë‹¤.
- os.tmpdir(): ì„ì‹œ íŒŒì¼ ì €ì¥ ê²½ë¡œë¥¼ ë³´ì—¬ì¤€ë‹¤.
- os.cpus(): ì»´í“¨í„°ì˜ ì½”ì–´ ì •ë³´ë¥¼ ë³´ì—¬ì¤€ë‹¤.
- os.freemem(): ì‚¬ìš© ê°€ëŠ¥í•œ ë©”ëª¨ë¦¬(RAM)ë¥¼ ë³´ì—¬ì¤€ë‹¤.
- os.totalmem(): ì „ì²´ ë©”ëª¨ë¦¬ ìš©ëŸ‰ì„ ë³´ì—¬ì¤€ë‹¤.

> Note: ì½”ì–´ ê°œìˆ˜ í™•ì¸í•˜ê¸°
>
> os.cpus().lengthë¥¼ í•˜ë©´ ì½”ì–´ì˜ ê°œìˆ˜ê°€ ìˆ«ìë¡œ ë‚˜ì˜¨ë‹¤. í•˜ì§€ë§Œ ë…¸ë“œì—ì„œ ì‹±ê¸€ ìŠ¤ë ˆë“œ í”„ë¡œê·¸ë˜ë°ì„ í•˜ë©´ ì½”ì–´ê°€ ëª‡ ê°œì´ë“  ìƒê´€ì—†ì´ ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ì½”ì–´ë¥¼ í•˜ë‚˜ë°–ì— ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤. í•˜ì§€ë§Œ 4.5ì ˆì— ë‚˜ì˜¤ëŠ” cluster ëª¨ë“ˆì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì—ëŠ” ì½”ì–´ ê°œìˆ˜ì— ë§ì¶°ì„œ í”„ë¡œì„¸ìŠ¤ë¥¼ ëŠ˜ë¦´ ìˆ˜ ìˆë‹¤. ì´ë•Œ cpus() ë©”ì„œë“œë¥¼ ì‚¬ìš©í•  ê²ƒì´ë‹¤.

os.constantsë¼ëŠ” ê°ì²´ê°€ ìˆë‹¤. ê·¸ ì•ˆì—ëŠ” ê°ì¢… ì—ëŸ¬ì™€ ì‹ í˜¸ì— ëŒ€í•œ ì •ë³´ê°€ ë‹´ê²¨ ìˆë‹¤. ì—ëŸ¬ê°€ ë°œìƒí–ˆì„ ë•Œ EADDRINUSEë‚˜ ECONNRESET ê°™ì€ ì—ëŸ¬ ì½”ë“œë¥¼ í•¨ê»˜ ë³´ì—¬ì¤€ë‹¤. ì´ëŸ¬í•œ ì½”ë“œë“¤ì´ os.constants ì•ˆì— ë“¤ì–´ìˆë‹¤. ì—ëŸ¬ ì½”ë“œê°€ ë„ˆë¬´ ë§ì•„ì„œ ì™¸ìš¸ ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ë°œìƒí• ë•Œë§ˆë‹¤ ê²€ìƒ‰í•´ ë³´ëŠ” ê²ƒì´ ì¢‹ë‹¤.

os ëª¨ë“ˆì€ ì£¼ë¡œ ì»´í“¨í„° ë‚´ë¶€ ìì›ì— ë¹ˆë²ˆí•˜ê²Œ ì ‘ê·¼í•˜ëŠ” ê²½ìš° ì‚¬ìš©ëœë‹¤. ì¦‰, ì¼ë°˜ì ì¸ ì›¹ ì„œë¹„ìŠ¤ë¥¼ ì œì‘í•  ë•ŒëŠ” ì‚¬ìš© ë¹ˆë„ê°€ ë†’ì§€ ì•Šë‹¤. í•˜ì§€ë§Œ ìš´ì˜ì²´ì œë³„ë¡œ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ê³  ì‹¶ì„ ë•Œ os ëª¨ë“ˆì´ ìœ ìš©í•  ê²ƒì´ë‹¤.

#### 3-5-2. path

í´ë”ì™€ íŒŒì¼ì˜ ê²½ë¡œë¥¼ ì‰½ê²Œ ì¡°ì‘í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” ëª¨ë“ˆì´ë‹¤. path ëª¨ë“ˆì´ í•„ìš”í•œ ì´ìœ  ì¤‘ í•˜ë‚˜ëŠ” ìš´ì˜ì²´ì œë³„ë¡œ ê²½ë¡œ êµ¬ë¶„ìê°€ ë‹¤ë¥´ê¸° ë•Œë¬¸ì´ë‹¤. í¬ê²Œ ìœˆë„ìš° íƒ€ì…ê³¼ POSIX íƒ€ì…ìœ¼ë¡œ êµ¬ë¶„ëœë‹¤. POSIXëŠ” ìœ ë‹‰ìŠ¤ ê¸°ë°˜ì˜ ìš´ì˜ì²´ì œë“¤ì„ ì˜ë¯¸í•˜ë©° ë§¥ê³¼ ë¦¬ëˆ…ìŠ¤ê°€ ì†í•´ ìˆë‹¤.

ì´ì™¸ì—ë„ íŒŒì¼ ê²½ë¡œì—ì„œ íŒŒì¼ëª…ì´ë‚˜ í™•ì¥ìë§Œ ë”°ë¡œ ë–¼ì–´ì£¼ëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•´ë‘ì–´ ì§ì ‘ êµ¬í˜„í•˜ì§€ ì•Šê³ ë„ í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

path ëª¨ë“ˆì˜ ì†ì„±ê³¼ ë©”ì„œë“œë¥¼ ì•Œì•„ë³´ì.

- path.sep: ê²½ë¡œì˜ êµ¬ë¶„ìì´ë‹¤. ìœˆë„ëŠ” \, POSIXëŠ” /ì´ë‹¤.

- path.delimiter: í™˜ê²½ ë³€ìˆ˜ì˜ êµ¬ë¶„ìì´ë‹¤. process.env.PATHë¥¼ ì…ë ¥í•˜ë©´ ì—¬ëŸ¬ ê°œì˜ ê²½ë¡œê°€ ì´ êµ¬ë¶„ìë¡œ êµ¬ë¶„ë˜ì–´ ìˆë‹¤. ìœˆë„ëŠ” ì„¸ë¯¸ì½œë¡ (;)ì´ê³ , POSIXëŠ” ì½œë¡ (:)ì´ë‹¤.

- path.dirname(ê²½ë¡œ): íŒŒì¼ì´ ìœ„ì¹˜í•œ í´ë” ê²½ë¡œë¥¼ ë³´ì—¬ì¤€ë‹¤.

- path.extname(ê²½ë¡œ): íŒŒì¼ì˜ í™•ì¥ìë¥¼ ë³´ì—¬ì¤€ë‹¤.

- path.basename(ê²½ë¡œ, í™•ì¥ì): íŒŒì¼ì˜ ì´ë¦„(í™•ì¥ì í¬í•¨)ì„ í‘œì‹œí•œë‹¤. íŒŒì¼ì˜ ì´ë¦„ë§Œ í‘œì‹œí•˜ê³  ì‹¶ë‹¤ë©´ basenameì˜ ë‘ ë²ˆì§¸ ì¸ìˆ˜ë¡œ íŒŒì¼ì˜ í™•ì¥ìë¥¼ ë„£ìœ¼ë©´ ëœë‹¤.

- path.parse(ê²½ë¡œ): íŒŒì¼ ê²½ë¡œë¥¼ root, dir, base, ext, nameìœ¼ë¡œ ë¶„ë¦¬í•œë‹¤.

- path.format(ê°ì²´): path.parse()í•œ ê°ì²´ë¥¼ íŒŒì¼ ê²½ë¡œë¡œ í•©ì¹œë‹¤.

- path.normalize(ê²½ë¡œ): /ë‚˜ \ë¥¼ ì‹¤ìˆ˜ë¡œ ì—¬ëŸ¬ ë²ˆ ì‚¬ìš©í–ˆê±°ë‚˜ í˜¼ìš©í–ˆì„ ë•Œ ì •ìƒì ì¸ ê²½ë¡œë¡œ ë³€í™˜í•œë‹¤.

- path.isAbsolute(ê²½ë¡œ): íŒŒì¼ì˜ ê²½ë¡œê°€ ì ˆëŒ€ê²½ë¡œì¸ì§€ ìƒëŒ€ê²½ë¡œì¸ì§€ë¥¼ trueë‚˜ falseë¡œ ì•Œë¦°ë‹¤.

- path.relative(ê¸°ì¤€ê²½ë¡œ, ë¹„êµê²½ë¡œ): ê²½ë¡œë¥¼ ë‘ ê°œ ë„£ìœ¼ë©´ ì²« ë²ˆì§¸ ê²½ë¡œì—ì„œ ë‘ ë²ˆì§¸ ê²½ë¡œë¡œ ê°€ëŠ” ë°©ë²•ì„ ì•Œë¦°ë‹¤.

- path.join(ê²½ë¡œ, â€¦): ì—¬ëŸ¬ ì¸ìˆ˜ë¥¼ ë„£ìœ¼ë©´ í•˜ë‚˜ì˜ ê²½ë¡œë¡œ í•©ì¹œë‹¤. ìƒëŒ€ê²½ë¡œì¸ ..(ë¶€ëª¨ ë””ë ‰í„°ë¦¬)ê³¼ .(í˜„ ìœ„ì¹˜)ë„ ì•Œì•„ì„œ ì²˜ë¦¬í•œë‹¤.

- path.resolve(ê²½ë¡œ, â€¦): path.join()ê³¼ ë¹„ìŠ·í•˜ì§€ë§Œ ì°¨ì´ê°€ ìˆë‹¤. ì°¨ì´ì ì€ ë‹¤ìŒì— ë‚˜ì˜¤ëŠ” Noteì—ì„œ ì„¤ëª…í•œë‹¤.

> Note: joinê³¼ resolveì˜ ì°¨ì´
>
> path.joinê³¼ path.resolve ë©”ì„œë“œëŠ” ë¹„ìŠ·í•´ ë³´ì´ì§€ë§Œ ë™ì‘ ë°©ì‹ì´ ë‹¤ë¥´ë‹¤. /ë¥¼ ë§Œë‚˜ë©´ path.resolveëŠ” ì ˆëŒ€ê²½ë¡œë¡œ ì¸ì‹í•´ì„œ ì•ì˜ ê²½ë¡œë¥¼ ë¬´ì‹œí•˜ê³ , path.joinì€ ìƒëŒ€ê²½ë¡œë¡œ ì²˜ë¦¬í•œë‹¤. ì½”ë“œë¡œ ë³´ë©´ ì´í•´í•˜ê¸° ì‰½ë‹¤.
>
> ```js
> path.join("/a", "/b", "c"); /*  ê²°ê³¼ : /a/b/c/ */
> path.resolve("/a", "/b", "c"); /*  ê²°ê³¼ : /b/c */
> ```

> Note: ìƒëŒ€ê²½ë¡œì™€ ì ˆëŒ€ê²½ë¡œ
>
> ì ˆëŒ€ê²½ë¡œëŠ” ë£¨íŠ¸ í´ë”(ìœˆë„ì˜ C:\ë‚˜ POSIXì˜ /)ë‚˜ ë…¸ë“œ í”„ë¡œì„¸ìŠ¤ê°€ ì‹¤í–‰ë˜ëŠ” ìœ„ì¹˜ê°€ ê¸°ì¤€ì´ ëœë‹¤.
> ìƒëŒ€ê²½ë¡œëŠ” í˜„ì¬ íŒŒì¼ì´ ê¸°ì¤€ì´ ëœë‹¤. í˜„ì¬ íŒŒì¼ê³¼ ê°™ì€ ê²½ë¡œë©´ ì  í•˜ë‚˜(.)ë¥¼, í˜„ì¬ íŒŒì¼ë³´ë‹¤ í•œ ë‹¨ê³„ ìƒìœ„ ê²½ë¡œë©´ ì  ë‘ ê°œ(..)ë¥¼ ì‚¬ìš©í•´ í‘œí˜„í•œë‹¤.

ê°€ë” ìœˆë„ì—ì„œ POSIX ìŠ¤íƒ€ì¼ ê²½ë¡œë¥¼ ì‚¬ìš©í•  ë•Œê°€ ìˆê³ , ê·¸ ë°˜ëŒ€ì¼ ë•Œë„ ìˆë‹¤. ì´ëŸ¬í•œ ê²½ìš° ìœˆë„ì—ì„œëŠ” path.posix.sepì´ë‚˜ path.posix.join()ê³¼ ê°™ì´ ì‚¬ìš©í•˜ë©´ ë˜ê³ , POSIXì—ì„œëŠ” path.win32.sepì´ë‚˜ path.win32.join()ê³¼ ê°™ì´ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

ë…¸ë“œëŠ” require.main íŒŒì¼ì„ ê¸°ì¤€ìœ¼ë¡œ ìƒëŒ€ ê²½ë¡œë¥¼ ì¸ì‹í•œë‹¤. ë”°ë¼ì„œ require.mainê³¼ëŠ” ë‹¤ë¥¸ ë””ë ‰í„°ë¦¬ì˜ íŒŒì¼ì´ ìƒëŒ€ ê²½ë¡œë¥¼ ê°–ê³  ìˆë‹¤ë©´ ì˜ˆìƒê³¼ ë‹¤ë¥´ê²Œ ë™ì‘í•  ìˆ˜ ìˆë‹¤. ì´ ë¬¸ì œëŠ” path ëª¨ë“ˆì„ í†µí•´ í•´ê²°í•  ìˆ˜ ìˆë‹¤. fs ëª¨ë“ˆì„ ì‚´í´ë³¼ ë•Œ í•œ ë²ˆ ë” ì§šê³  ë„˜ì–´ê°ˆ ê²ƒì´ë‹¤.

path ëª¨ë“ˆ ì´ì „ê¹Œì§€ëŠ” ì¤‘ìš”í•œ APIë§Œ ì¶”ë ¸ìœ¼ë‚˜, path ëª¨ë“ˆì€ ì†ì„± í•˜ë‚˜í•˜ë‚˜ê°€ ëª¨ë‘ ìœ ìš©í•˜ë¯€ë¡œ ì „ë¶€ ë„£ì—ˆë‹¤. path ëª¨ë“ˆì€ ì•ìœ¼ë¡œ ë…¸ë“œ í”„ë¡œê·¸ë˜ë°ì„ í•˜ë©´ì„œ ë§¤ìš° ìì£¼ ì“°ê²Œ ë  ëª¨ë“ˆ ì¤‘ í•˜ë‚˜ì´ë‹¤.

#### 3-5-3. url

> url.js

```js
const url = require("url");

const { URL } = url;
const myURL = new URL(
  "http://www.gilbut.co.kr/book/bookList.aspx?sercate1=001001000#anchor"
);
console.log("new URL():", myURL);
console.log("url.format():", url.format(myURL));
console.log("------------------------------");
const parsedUrl = url.parse(
  "http://www.gilbut.co.kr/book/bookList.aspx?sercate1=001001000#anchor"
);
console.log("url.parse():", parsedUrl);
console.log("url.format():", url.format(parsedUrl));
```

- url ëª¨ë“ˆ ì•ˆì— URL ìƒì„±ìê°€ ìˆë‹¤. ì´ ìƒì„±ìì— ì£¼ì†Œë¥¼ ë„£ì–´ ê°ì²´ë¡œ ë§Œë“¤ë©´ ì£¼ì†Œê°€ ë¶€ë¶„ë³„ë¡œ ì •ë¦¬ëœë‹¤. ì´ ë°©ì‹ì´ WHATWGì˜ urlì´ë‹¤. WHATWGì—ë§Œ ìˆëŠ” `username`,`password`, `origin`, `searchParams` ì†ì„±ì´ ì¡´ì¬í•œë‹¤.

> ì½˜ì†”

```
$ node url
new URL(): URL {
  href: 'http://www.gilbut.co.kr/book/bookList.aspx?sercate1=001001000#anchor',
  origin: 'http://www.gilbut.co.kr',
  protocol: 'http:',
  username: '',
  password: '',
  host: 'www.gilbut.co.kr',
  hostname: 'www.gilbut.co.kr',
  port: '',
  pathname: '/book/bookList.aspx',
  search: '?sercate1=001001000',
  searchParams: URLSearchParams { 'sercate1' => '001001000' },
  hash: '#anchor'
}
url.format(): http://www.gilbut.co.kr/book/bookList.aspx?sercate1=001001000#anchor
------------------------------
url.parse(): Url {
  protocol: 'http:',
  slashes: true,
  auth: null,
  host: 'www.gilbut.co.kr',
  port: null,
  hostname: 'www.gilbut.co.kr',
  hash: '#anchor',
  search: '?sercate1=001001000',
  query: 'sercate1=001001000',
  pathname: '/book/bookList.aspx',
  path: '/book/bookList.aspx?sercate1=001001000',
  href: 'http://www.gilbut.co.kr/book/bookList.aspx?sercate1=001001000#anchor'
}
url.format(): http://www.gilbut.co.kr/book/bookList.aspx?sercate1=001001000#anchor
```

ê¸°ì¡´ ë…¸ë“œ ë°©ì‹ì—ì„œëŠ” ë‘ ë©”ì„œë“œë¥¼ ì£¼ë¡œ ì‚¬ìš©í•œë‹¤.

- **url.parse(ì£¼ì†Œ)**: ì£¼ì†Œë¥¼ ë¶„í•´í•œë‹¤. WHATWG ë°©ì‹ê³¼ ë¹„êµí•˜ë©´ usernameê³¼ password ëŒ€ì‹  auth ì†ì„±ì´ ìˆê³ , searchParams ëŒ€ì‹  queryê°€ ìˆë‹¤.

- **url.format(ê°ì²´)**: WHATWG ë°©ì‹ urlê³¼ ê¸°ì¡´ ë…¸ë“œì˜ urlì„ ëª¨ë‘ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ë¶„í•´ë˜ì—ˆë˜ url ê°ì²´ë¥¼ ë‹¤ì‹œ ì›ë˜ ìƒíƒœë¡œ ì¡°ë¦½í•œë‹¤.

WHATWGì™€ ë…¸ë“œì˜ urlì€ ì·¨í–¥ì— ë”°ë¼ ì‚¬ìš©í•˜ë©´ ë˜ì§€ë§Œ, ë…¸ë“œì˜ url í˜•ì‹ì„ ê¼­ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ìˆë‹¤. host ë¶€ë¶„ ì—†ì´ pathname ë¶€ë¶„ë§Œ ì˜¤ëŠ” ì£¼ì†Œì¸ ê²½ìš°(ì˜ˆì‹œ: `/book/bookList.apsx`)ì—ëŠ” WHATWG ë°©ì‹ì´ ì²˜ë¦¬í•  ìˆ˜ ì—†ë‹¤. 4ì¥ì—ì„œ ì„œë²„ë¥¼ ë§Œë“¤ ë•ŒëŠ” host ë¶€ë¶„ ì—†ì´ pathnameë§Œ ì˜¤ëŠ” ì£¼ì†Œë¥¼ ë³´ê²Œ ë  ê²ƒì´ë‹¤.

WHATWG ë°©ì‹ì€ search ë¶€ë¶„ì„ searchParamsë¼ëŠ” íŠ¹ìˆ˜í•œ ê°ì²´ë¡œ ë°˜í™˜í•˜ë¯€ë¡œ ìœ ìš©í•˜ë‹¤. search ë¶€ë¶„ì€ ë³´í†µ ì£¼ì†Œë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ì „ë‹¬í•  ë•Œ ì‚¬ìš©ëœë‹¤. searchëŠ” ë¬¼ìŒí‘œ(?)ë¡œ ì‹œì‘í•˜ê³ , ê·¸ ë’¤ì— **í‚¤=ê°’** í˜•ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì „ë‹¬í•œë‹¤. ì—¬ëŸ¬ í‚¤ê°€ ìˆì„ ê²½ìš°ì—ëŠ” `&`ë¡œ êµ¬ë¶„í•œë‹¤.

`http://www.gilbut.co.kr/?page=3&limit=10&category=nodejs&category=javascript`ì™€ ê°™ì€ ì£¼ì†Œì—ì„œëŠ” `?page=3&limit=10&category=nodejs&category=javascript` ë¶€ë¶„ì´ searchì´ë‹¤.

ë‹¤ìŒìœ¼ë¡œ `searchParams` ê°ì²´ë¥¼ ì•Œì•„ë³´ì.

> searchParams.js

```js
const { URL } = require("url");

const myURL = new URL(
  "http://www.gilbut.co.kr/?page=3&limit=10&category=nodejs&category=javascript"
);
console.log("searchParams:", myURL.searchParams);
console.log("searchParams.getAll():", myURL.searchParams.getAll("category"));
console.log("searchParams.get():", myURL.searchParams.get("limit"));
console.log("searchParams.has():", myURL.searchParams.has("page"));

console.log("searchParams.keys():", myURL.searchParams.keys());
console.log("searchParams.values():", myURL.searchParams.values());

myURL.searchParams.append("filter", "es3");
myURL.searchParams.append("filter", "es5");
console.log(myURL.searchParams.getAll("filter"));

myURL.searchParams.set("filter", "es6");
console.log(myURL.searchParams.getAll("filter"));

myURL.searchParams.delete("filter");
console.log(myURL.searchParams.getAll("filter"));

console.log("searchParams.toString():", myURL.searchParams.toString());
myURL.search = myURL.searchParams.toString();
```

> ì½˜ì†”

```
searchParams: URLSearchParams {
  'page' => '3',
  'limit' => '10',
  'category' => 'nodejs',
  'category' => 'javascript' }
searchParams.getAll(): [ 'nodejs', 'javascript' ]
searchParams.get(): 10
searchParams.has(): true
searchParams.keys(): URLSearchParams Iterator { 'page', 'limit', 'category', 'category' }
searchParams.values(): URLSearchParams Iterator { '3', '10', 'nodejs', 'javascript' }
[ 'es3', 'es5' ]
[ 'es6' ]
[]
searchParams.toString(): page=3&limit=10&category=nodejs&category=javascript
```

URL ìƒì„±ìë¥¼ í†µí•´ `myURL`ì´ë¼ëŠ” ì£¼ì†Œ ê°ì²´ë¥¼ ë§Œë“¤ì—ˆë‹¤. myURL ì•ˆì—ëŠ” `searchParams` ê°ì²´ê°€ ìˆë‹¤. ì´ ê°ì²´ëŠ” search ë¶€ë¶„ì„ ì¡°ì‘í•˜ëŠ” ë‹¤ì–‘í•œ ë©”ì†Œë“œë¥¼ ì§€ì›í•œë‹¤. 2.2.2ì˜ formData ê°ì²´ ë©”ì†Œë“œì™€ ë¹„ìŠ·í•˜ë‹¤.

- getAll(í‚¤): í‚¤ì— í•´ë‹¹í•˜ëŠ” ëª¨ë“  ê°’ë“¤ì„ ê°€ì ¸ì˜¨ë‹¤. category ì•ˆì—ëŠ” nodejsì™€ javascriptë¼ëŠ” ë‘ ê°€ì§€ ê°’ì´ ë“¤ì–´ ìˆë‹¤.
- get(í‚¤): í‚¤ì— í•´ë‹¹í•˜ëŠ” ì²« ë²ˆì§¸ ê°’ë§Œ ê°€ì ¸ì˜¨ë‹¤.
- has(í‚¤): í•´ë‹¹ í‚¤ê°€ ìˆëŠ”ì§€ ì—†ëŠ”ì§€ë¥¼ ê²€ì‚¬í•œë‹¤.
- keys(): searchParamsì˜ ëª¨ë“  **í‚¤**ë¥¼ ë°˜ë³µê¸°(iterator)(ES6ë¬¸ë²•) ê°ì²´ë¡œ ê°€ì ¸ì˜¨ë‹¤.
- values(): searchParamsì˜ ëª¨ë“  **ê°’**ì„ ë°˜ë³µê¸° ê°ì²´ë¡œ ê°€ì ¸ì˜¨ë‹¤.
- append(í‚¤, ê°’): í•´ë‹¹ í‚¤ë¥¼ ì¶”ê°€í•œë‹¤. ê°™ì€ í‚¤ì˜ ê°’ì´ ìˆë‹¤ë©´ ìœ ì§€í•˜ê³  í•˜ë‚˜ ë” ì¶”ê°€í•œë‹¤.
- set(í‚¤, ê°’): appendì™€ ë¹„ìŠ·í•˜ì§€ë§Œ, ê°™ì€ í‚¤ì˜ ê°’ë“¤ì„ ëª¨ë‘ ì§€ìš°ê³  ìƒˆë¡œ ì¶”ê°€í•œë‹¤.
- delete(í‚¤): í•´ë‹¹ í‚¤ë¥¼ ì œê±°í•œë‹¤.
- toString(): ì¡°ì‘í•œ searchParams ê°ì²´ë¥¼ ë‹¤ì‹œ ë¬¸ìì—´ë¡œ ë§Œë“ ë‹¤. ì´ ë¬¸ìì—´ì„ searchì— ëŒ€ì…í•˜ë©´ ì£¼ì†Œ ê°ì²´ì— ë°˜ì˜ëœë‹¤.

queryê°™ì€ ë¬¸ìì—´ë³´ë‹¤ searchParamsê°€ ìœ ìš©í•œ ì´ìœ ëŠ” queryì˜ ê²½ìš° ë‹¤ìŒì— ë°°ìš°ëŠ” querystring ëª¨ë“ˆì„ í•œ ë²ˆ ë” ì‚¬ìš©í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì´ë‹¤.

#### 3-5-4. querystring

WHATWG ë°©ì‹ì˜ url ëŒ€ì‹  ê¸°ì¡´ ë…¸ë“œì˜ urlì„ ì‚¬ìš©í•  ë•Œ, search ë¶€ë¶„ì„ ì‚¬ìš©í•˜ê¸° ì‰½ê²Œ ê°ì²´ë¡œ ë§Œë“œëŠ” ëª¨ë“ˆì´ë‹¤.

> querystring.js

```js
const url = require("url");
const querystring = require("querystring");

const parsedUrl = url.parse(
  "http://www.gilbut.co.kr/?page=3&limit=10&category=nodejs&category=javascript"
);
const query = querystring.parse(parsedUrl.query);
console.log("querystring.parse():", query);
console.log("querystring.stringify():", querystring.stringify(query));
```

> ì½˜ì†”

```
sangminpark@Sangminui-MacBookPro-16 test % node querystring.js
querystring.parse(): [Object: null prototype] {
  page: '3',
  limit: '10',
  category: [ 'nodejs', 'javascript' ]
}
querystring.stringify(): page=3&limit=10&category=nodejs&category=javascript
```

ì²˜ìŒìœ¼ë¡œ ëª¨ë“ˆ ë‘ ê°œë¥¼ í•¨ê»˜ ì‚¬ìš©í–ˆë‹¤. ì‹¤ì œ í”„ë¡œì íŠ¸ì—ì„œë„ ì´ë ‡ê²Œ ëª¨ë“ˆ ì—¬ëŸ¬ ê°œë¥¼ íŒŒì¼ í•˜ë‚˜ì— ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆë‹¤.

- **querystring.parse(ì¿¼ë¦¬)**: urlì˜ query ë¶€ë¶„ì„ ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´ë¡œ ë¶„í•´í•œë‹¤.
- **querystring.stringify(ê°ì²´)**: ë¶„í•´ëœ query ê°ì²´ë¥¼ ë¬¸ìì—´ë¡œ ë‹¤ì‹œ ì¡°ë¦½í•œë‹¤.

ê°„ë‹¨í•˜ê²Œ ê°ì²´ë¡œ ë¶„í•´ë˜ê³  ë¬¸ìì—´ë¡œ ì¡°ë¦½ë˜ë¯€ë¡œ í¸ë¦¬í•˜ë‹¤.

#### 3-5-5. crypto

ë‹¤ì–‘í•œ ë°©ì‹ì˜ ì•”í˜¸í™”ë¥¼ ë„ì™€ì£¼ëŠ” ëª¨ë“ˆì´ë‹¤. ëª‡ ê°€ì§€ ë©”ì†Œë“œëŠ” ìµí˜€ë‘ë©´ ì‹¤ì œ ì„œë¹„ìŠ¤ì—ë„ ì ìš©í•  ìˆ˜ ìˆì–´ì„œ ì •ë§ ìœ ìš©í•˜ë‹¤.

ê³ ê°ì˜ ë¹„ë°€ë²ˆí˜¸ëŠ” ë°˜ë“œì‹œ ì•”í˜¸í™”í•´ì•¼ í•œë‹¤. ë¹„ë°€ë²ˆí˜¸ë¥¼ ì•”í˜¸í™”í•˜ì§€ ì•Šìœ¼ë©´ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì €ì¥í•´ë‘” ë°ì´í„°ë² ì´ìŠ¤ê°€ í•´í‚¹ë‹¹í•˜ëŠ” ìˆœê°„, ê³ ê°ë“¤ì˜ ë¹„ë°€ë²ˆí˜¸ë„ ê³ ìŠ¤ë€íˆ í•´ì»¤ ì†ì— ë„˜ì–´ê°€ê³  ë§Œë‹¤. ë¬¼ë¡  ë°ì´í„°ë² ì´ìŠ¤ê°€ í•´í‚¹ë‹¹í•˜ì§€ ì•Šë„ë¡ ë…¸ë ¥í•´ì•¼ê² ì§€ë§Œ, ì•ˆì „ ì¥ì¹˜ë¥¼ ì´ì¤‘ìœ¼ë¡œ ë§Œë“¤ì–´ë†“ëŠ” ê²ƒì´ ì¢‹ë‹¤.

##### 3-5-5-1. ë‹¨ë°©í–¥ ì•”í˜¸í™”

ë¹„ë°€ë²ˆí˜¸ëŠ” ë³´í†µ ë‹¨ë°©í–¥ ì•”í˜¸í™” ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•´ì„œ ì•”í˜¸í™”í•œë‹¤. ë‹¨ë°©í–¥ ì•”í˜¸í™”ë€ ë³µí˜¸í™”í•  ìˆ˜ ì—†ëŠ” ì•”í˜¸í™” ë°©ì‹ì„ ëœ»í•œë‹¤. ë³µí˜¸í™”ëŠ” ì•”í˜¸í™”ëœ ë¬¸ìì—´ì„ ì›ë˜ ë¬¸ìì—´ë¡œ ë˜ëŒë ¤ë†“ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. ì¦‰, ë‹¨ë°©í–¥ ì•”í˜¸í™”ëŠ” í•œ ë²ˆ ì•”í˜¸í™”í•˜ë©´ ì›ë˜ ë¬¸ìì—´ì„ ì°¾ì„ ìˆ˜ ì—†ë‹¤. ë³µí˜¸í™”í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ì•”í˜¸í™”ë¼ê³  í‘œí˜„í•˜ëŠ” ëŒ€ì‹  í•´ì‹œ í•¨ìˆ˜ë¼ê³  ë¶€ë¥´ê¸°ë„ í•œë‹¤.

ë³µí˜¸í™”í•  ìˆ˜ ì—†ëŠ” ì•”í˜¸í™”ê°€ ì™œ í•„ìš”í•œì§€ ì˜ë¬¸ì´ ë“¤ ìˆ˜ë„ ìˆë‹¤. í•˜ì§€ë§Œ ìƒê°í•´ë³´ë©´ ê³ ê°ì˜ ë¹„ë°€ë²ˆí˜¸ëŠ” ë³µí˜¸í™”í•  í•„ìš”ê°€ ì—†ë‹¤. ë¨¼ì € ê³ ê°ì˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì•”í˜¸í™”í•´ì„œ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•œë‹¤. ê·¸ë¦¬ê³  ë¡œê·¸ì¸í•  ë•Œë§ˆë‹¤ ì…ë ¥ë°›ì€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ê°™ì€ ì•”í˜¸í™” ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ì•”í˜¸í™”í•œ í›„, ë°ì´í„°ë² ì´ìŠ¤ì˜ ë¹„ë°€ë²ˆí˜¸ì™€ ë¹„êµí•˜ë©´ ëœë‹¤. ì›ë˜ ë¹„ë°€ë²ˆí˜¸ëŠ” ì–´ë””ì—ë„ ì €ì¥ë˜ì§€ ì•Šê³  ì•”í˜¸í™”ëœ ë¬¸ìì—´ë¡œë§Œ ë¹„êµí•˜ëŠ” ê²ƒì´ë‹¤.

ë‹¨ë°©í–¥ ì•”í˜¸í™” ì•Œê³ ë¦¬ì¦˜ì€ ì£¼ë¡œ í•´ì‹œ ê¸°ë²•ì„ ì‚¬ìš©í•œë‹¤. í•´ì‹œ ê¸°ë²•ì´ë€ ì–´ë– í•œ ë¬¸ìì—´ì„ ê³ ì •ëœ ê¸¸ì´ì˜ ë‹¤ë¥¸ ë¬¸ìì—´ë¡œ ë°”ê¿”ë²„ë¦¬ëŠ” ë°©ì‹ì´ë‹¤. ì˜ˆë¥¼ ë“¤ë©´ `abcdefgh`ë¼ëŠ” ë¬¸ìì—´ì„ `qvew`ë¡œ ë°”ê¿”ë²„ë¦¬ê³ , `ijklm`ì´ë¼ëŠ” ë¬¸ìì—´ì„ `zvsf`ë¡œ ë°”ê¿”ë²„ë¦¬ëŠ” ê²ƒì´ë‹¤. ì…ë ¥ ë¬¸ìì—´ì˜ ê¸¸ì´ëŠ” ë‹¤ë¥´ì§€ë§Œ, ì¶œë ¥ ë¬¸ìì—´ì˜ ê¸¸ì´ëŠ” ë„¤ ìë¦¬ë¡œ ê³ ì •ë˜ì–´ ìˆë‹¤.

ë…¸ë“œì—ì„œ í•´ì‹œ í•¨ìˆ˜ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš©í•œë‹¤.

> hash.js

```js
const crypto = require("crypto");

console.log(
  "base64:",
  crypto.createHash("sha512").update("ë¹„ë°€ë²ˆí˜¸").digest("base64")
);
console.log(
  "hex:",
  crypto.createHash("sha512").update("ë¹„ë°€ë²ˆí˜¸").digest("hex")
);
console.log(
  "base64:",
  crypto.createHash("sha512").update("ë‹¤ë¥¸ ë¹„ë°€ë²ˆí˜¸").digest("base64")
);
```

> ì½˜ì†”

```
sangminpark@Sangminui-MacBookPro-16 test % node hash.js
base64: dvfV6nyLRRt3NxKSlTHOkkEGgqW2HRtfu19Ou/psUXvwlebbXCboxIPmDYOFRIpqav2eUTBFuHaZri5x+usy1g==
hex: 76f7d5ea7c8b451b773712929531ce92410682a5b61d1b5fbb5f4ebbfa6c517bf095e6db5c26e8c483e60d8385448a6a6afd9e513045b87699ae2e71faeb32d6
base64: cx49cjC8ctKtMzwJGBY853itZeb6qxzXGvuUJkbWTGn5VXAFbAwXGEOxU2Qksoj+aM2GWPhc1O7mmkyohXMsQw==
```

ë¹„ë°€ë²ˆí˜¸ë¼ëŠ” ë¬¸ìì—´ì„ í•´ì‹œë¥¼ ì‚¬ìš©í•´ ë°”ê¿”ë´¤ë‹¤.

- **createHash(ì•Œê³ ë¦¬ì¦˜)**: ì‚¬ìš©í•  í•´ì‹œ ì•Œê³ ë¦¬ì¦˜ì„ ë„£ëŠ”ë‹¤. `md5`, `sha1`, `sha256`, `sha512` ë“±ì´ ê°€ëŠ¥í•˜ì§€ë§Œ, `md5`ì™€ `sha1`ì€ ì´ë¯¸ ì·¨ì•½ì ì´ ë°œê²¬ë˜ì—ˆë‹¤. í˜„ì¬ëŠ” `sha512` ì •ë„ë¡œ ì¶©ë¶„í•˜ì§€ë§Œ, ë‚˜ì¤‘ì— `sha512` ë§ˆì €ë„ ì·¨ì•½í•´ì§€ë©´ ë” ê°•í™”ëœ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ë°”ê¿”ì•¼ í•œë‹¤.
- **update(ë¬¸ìì—´)**: ë³€í™˜í•  ë¬¸ìì—´ì„ ë„£ëŠ”ë‹¤.
- **digest(ì¸ì½”ë”©)**: ì¸ì½”ë”©í•  ì•Œê³ ë¦¬ì¦˜ì„ ë„£ëŠ”ë‹¤. `base64`,`hex`, `latin1`ì´ ì£¼ë¡œ ì‚¬ìš©ë˜ëŠ”ë°, ê·¸ì¤‘ `base64`ê°€ ê²°ê³¼ ë¬¸ìì—´ì´ ê°€ì¥ ì§§ì•„ ì• ìš©ëœë‹¤. ê²°ê³¼ë¬¼ë¡œ ë³€í™˜ëœ ë¬¸ìì—´ì„ ë°˜í™˜í•œë‹¤.

ê°€ë” `nopqrst`ë¼ëŠ” ë¬¸ìì—´ì´ `qvew`ë¡œ ë³€í™˜ë˜ì–´ `abcdefgh`ë¥¼ ë„£ì—ˆì„ ë•Œì™€ ë˜‘ê°™ì€ ì¶œë ¥ ë¬¸ìì—´ë¡œ ë°”ë€” ë•Œë„ ìˆë‹¤. ì´ëŸ° ìƒí™©ì„ ì¶©ëŒì´ ë°œìƒí–ˆë‹¤ê³  í‘œí˜„í•œë‹¤. í•´í‚¹ìš© ì»´í“¨í„°ì˜ ì—­í• ì€ ì–´ë– í•œ ë¬¸ìì—´ì´ ê°™ì€ ì¶œë ¥ ë¬¸ìì—´ì„ ë°˜í™˜í•˜ëŠ”ì§€ ì°¾ì•„ë‚´ëŠ” ê²ƒì´ë‹¤. ì—¬ëŸ¬ ì…ë ¥ ë¬¸ìì—´ì´ ê°™ì€ ì¶œë ¥ ë¬¸ìì—´ë¡œ ë³€í™˜ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë¹„ë°€ë²ˆí˜¸ë¥¼ abcdefghë¡œ ì„¤ì •í–ˆì–´ë„ nopqrstë¡œ ëš«ë¦¬ëŠ” ì‚¬íƒœê°€ ë°œìƒí•˜ê²Œ ëœë‹¤.

í•´í‚¹ìš© ì»´í“¨í„°ì˜ ì„±ëŠ¥ì´ ë°œë‹¬í•¨ì— ë”°ë¼ ê¸°ì¡´ í•´ì‹œ ì•Œê³ ë¦¬ì¦˜ë“¤ì´ ìœ„í˜‘ë°›ê³  ìˆì§€ë§Œ, ì´ì™€ ë™ì‹œì— í•´ì‹œ ì•Œê³ ë¦¬ì¦˜ë„ ë” ê°•ë ¥í•˜ê²Œ ì§„í™”í•˜ê³  ìˆë‹¤. ì–¸ì  ê°€ëŠ” `sha512ì˜` ì·¨ì•½ì ë„ ë°œê²¬ë  ê²ƒì´ë‹¤. ê·¸ë ‡ê²Œ ëœë‹¤ë©´ ë” ê°•ë ¥í•œ ì•Œê³ ë¦¬ì¦˜ì¸ `sha3`ìœ¼ë¡œ ì´ì „í•˜ë©´ ëœë‹¤.

í˜„ì¬ëŠ” ì£¼ë¡œ `pbkdf2`ë‚˜ `bcrypt`, `scrypt`ë¼ëŠ” ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì•”í˜¸í™”í•˜ê³  ìˆë‹¤. ê·¸ì¤‘ ë…¸ë“œì—ì„œ ì§€ì›í•˜ëŠ” `pbkdf2`ì— ëŒ€í•´ ì•Œì•„ë³´ì. `pbkdf2`ëŠ” ê°„ë‹¨íˆ ë§í•˜ë©´ ê¸°ì¡´ ë¬¸ìì—´ì— `salt`ë¼ê³  ë¶ˆë¦¬ëŠ” ë¬¸ìì—´ì„ ë¶™ì¸ í›„ í•´ì‹œ ì•Œê³ ë¦¬ì¦˜ì„ ë°˜ë³µí•´ì„œ ì ìš©í•˜ëŠ” ê²ƒì´ë‹¤.

> pbkdf2.js

```js
const crypto = require("crypto");

crypto.randomBytes(64, (err, buf) => {
  const salt = buf.toString("base64");
  console.log("salt:", salt);
  crypto.pbkdf2("ë¹„ë°€ë²ˆí˜¸", salt, 100000, 64, "sha512", (err, key) => {
    console.log("password:", key.toString("base64"));
  });
});
```

ë¨¼ì € `randomBytes()` ë©”ì„œë“œë¡œ 64ë°”ì´íŠ¸ ê¸¸ì´ì˜ ë¬¸ìì—´ì„ ë§Œë“ ë‹¤. ì´ê²ƒì´ saltê°€ ëœë‹¤. `pbkdf2()` ë©”ì„œë“œì—ëŠ” ìˆœì„œëŒ€ë¡œ ë¹„ë°€ë²ˆí˜¸, salt, ë°˜ë³µ íšŸìˆ˜, ì¶œë ¥ ë°”ì´íŠ¸, í•´ì‹œ ì•Œê³ ë¦¬ì¦˜ì„ ì¸ìˆ˜ë¡œ ë„£ëŠ”ë‹¤. ì˜ˆì‹œì—ì„œëŠ” 10ë§Œ ë²ˆ ë°˜ë³µí•´ì„œ ì ìš©í•œë‹¤ê³  í–ˆë‹¤. ì¦‰, `sha512`ë¡œ ë³€í™˜ëœ ê²°ê³¼ê°’ì„ ë‹¤ì‹œ `sha512`ë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì •ì„ 10ë§Œ ë²ˆ ë°˜ë³µí•˜ëŠ” ê²ƒì´ë‹¤.

ë„ˆë¬´ ë§ì´ ë°˜ë³µí•˜ëŠ” ê²ƒì€ ì•„ë‹Œì§€ ê±±ì •ë  ìˆ˜ë„ ìˆì§€ë§Œ, 1ì´ˆ ì •ë„ë°–ì— ê±¸ë¦¬ì§€ ì•ŠëŠ”ë‹¤. ì´ëŠ” ì»´í“¨í„°ì˜ ì„±ëŠ¥ì— ì¢Œìš°ë˜ë¯€ë¡œ ì¡°ê¸ˆ ëŠë¦¬ë‹¤ ì‹¶ìœ¼ë©´ ë°˜ë³µ íšŸìˆ˜ë¥¼ ë‚®ì¶”ê³ , ë„ˆë¬´ ë¹ ë¥´ë‹¤ ì‹¶ìœ¼ë©´ 1ì´ˆ ì •ë„ê°€ ë  ë•Œê¹Œì§€ ë°˜ë³µ íšŸìˆ˜ë¥¼ ëŠ˜ë¦°ë‹¤.

ì‹±ê¸€ ìŠ¤ë ˆë“œ í”„ë¡œê·¸ë˜ë°ì„ í•  ë•Œ 1ì´ˆ ë™ì•ˆ ë¸”ë¡œí‚¹ì´ ë˜ëŠ” ê²ƒì€ ì•„ë‹Œì§€ ê±±ì •í•  ìˆ˜ë„ ìˆë‹¤. ë‹¤í–‰íˆ `crypto.randomBytes`ì™€ `crypto.pbkdf2` ë©”ì„œë“œëŠ” ë‚´ë¶€ì ìœ¼ë¡œ ìŠ¤ë ˆë“œí’€ì„ ì‚¬ìš©í•´ ë©€í‹° ìŠ¤ë ˆë”©ìœ¼ë¡œ ë™ì‘í•œë‹¤. ì´ëŸ¬í•œ ë©”ì„œë“œë“¤ì´ ëª‡ ê°œ ìˆëŠ”ë° 3.6.4ì—ì„œ ì•Œì•„ë³¼ ê²ƒì´ë‹¤.

> ì½˜ì†”

```
sangminpark@Sangminui-MacBookPro-16 test % node pbkdf2.js
salt: 8qIuZKpVeA2uh2gMTzbhQD+/fluJ+2TzposYPqO7tuWT88feU3lYbZoIx3olbfBHjsVy30v6fw0p7v1GnthjNA==
password: nqvJKiE9soL8+omzjvKQjgPFyOIs3NA9ybkk8zhWqaR9u+xOugoa9IVQ2saDY/C0oQeU49ADaUlIeh2PlZVvMQ==
```

randomBytesì´ë¯€ë¡œ ë§¤ë²ˆ ì‹¤í–‰í•  ë•Œë§ˆë‹¤ ê²°ê³¼ê°€ ë‹¬ë¼ì§„ë‹¤. ë”°ë¼ì„œ saltë¥¼ ì˜ ë³´ê´€í•˜ê³  ìˆì–´ì•¼ ë¹„ë°€ë²ˆí˜¸ë„ ì°¾ì„ ìˆ˜ ìˆë‹¤.

`pbkdf2`ëŠ” ê°„ë‹¨í•˜ì§€ë§Œ `bcrypt`ë‚˜ `scrypt`ë³´ë‹¤ ì·¨ì•½í•˜ë¯€ë¡œ ë‚˜ì¤‘ì— ë” ë‚˜ì€ ë³´ì•ˆì´ í•„ìš”í•˜ë©´ `bcrypt`ë‚˜ `scrypt` ë°©ì‹ì„ ì‚¬ìš©í•˜ë©´ ëœë‹¤. ì—¬ê¸°ì„  ì¶”í›„ì— íšŒì›ì˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì•”í˜¸í™”í•  ë•Œ `bcrypt` ë°©ì‹ì„ ì‚¬ìš©í•œë‹¤.

##### 3-5-5-2. ì–‘ë°©í–¥ ì•”í˜¸í™”

ì´ë²ˆì—ëŠ” ì–‘ë°©í–¥ ëŒ€ì¹­í˜• ì•”í˜¸í™”ë¥¼ ì•Œì•„ë³´ì. ì•”í˜¸í™”ëœ ë¬¸ìì—´ì„ ë³µí˜¸í™”í•  ìˆ˜ ìˆìœ¼ë©°, í‚¤(ì—´ì‡ )ë¼ëŠ” ê²ƒì´ ì‚¬ìš©ëœë‹¤. ëŒ€ì¹­í˜• ì•”í˜¸í™”ì—ì„œ ì•”í˜¸ë¥¼ ë³µí˜¸í™”í•˜ë ¤ë©´ ì•”í˜¸í™”í•  ë•Œ ì‚¬ìš©í•œ í‚¤ì™€ ê°™ì€ í‚¤ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

ë‹¤ìŒì€ ë…¸ë“œë¡œ ì–‘ë°©í–¥ ì•”í˜¸í™”í•˜ëŠ” ë°©ë²•ì´ë‹¤. í•˜ì§€ë§Œ ë‹¤ìŒ ì½”ë“œë¥¼ ì™„ë²½í•˜ê²Œ ì´í•´í•˜ë ¤ë©´ ì•”í˜¸í•™ì„ ì¶”ê°€ë¡œ ê³µë¶€í•´ì•¼ í•œë‹¤.

> cipher.js

```js
const crypto = require("crypto");

const algorithm = "aes-256-cbc";
const key = "abcdefghijklmnopqrstuvwxyz123456";
const iv = "1234567890123456";
const cipher = crypto.createCipheriv(algorithm, key, iv);
let result = cipher.update("ì•”í˜¸í™”í•  ë¬¸ì¥", "utf8", "base64");
result += cipher.final("base64");
console.log("ì•”í˜¸í™”:", result);

const decipher = crypto.createDecipheriv(algorithm, key, iv);
let result2 = decipher.update(result, "base64", "utf8");
result2 += decipher.final("utf8");
console.log("ë³µí˜¸í™”:", result2);
```

- **crypto.createCipheriv(ì•Œê³ ë¦¬ì¦˜, í‚¤, iv)**: ì•”í˜¸í™” ì•Œê³ ë¦¬ì¦˜ê³¼ í‚¤, ivë¥¼ ë„£ëŠ”ë‹¤. ì•”í˜¸í™” ì•Œê³ ë¦¬ì¦˜ì€ aes-256-cbcë¥¼ ì‚¬ìš©í–ˆìœ¼ë©°, ë‹¤ë¥¸ ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•´ë„ ëœë‹¤. aes-256-cbc ì•Œê³ ë¦¬ì¦˜ì˜ ê²½ìš° í‚¤ëŠ” 32ë°”ì´íŠ¸ì—¬ì•¼ í•˜ê³ , ivëŠ” 16ë°”ì´íŠ¸ì—¬ì•¼ í•œë‹¤. ivëŠ” ì•”í˜¸í™”í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ì´ˆê¸°í™” ë²¡í„°ë¥¼ ì˜ë¯¸í•˜ì§€ë§Œ, ì—¬ê¸°ì„œ ì„¤ëª…í•˜ê¸°ì—ëŠ” ë‚´ìš©ì´ ë§ìœ¼ë¯€ë¡œ AES ì•”í˜¸í™”ì— ëŒ€í•´ ë”°ë¡œ ê³µë¶€í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. ì‚¬ìš© ê°€ëŠ¥í•œ ì•Œê³ ë¦¬ì¦˜ ëª©ë¡ì€ `crypto.getCiphers()`ë¥¼ í˜¸ì¶œí•˜ë©´ ë³¼ ìˆ˜ ìˆë‹¤.

- **cipher.update(ë¬¸ìì—´, ì¸ì½”ë”©, ì¶œë ¥ ì¸ì½”ë”©)**: ì•”í˜¸í™”í•  ëŒ€ìƒê³¼ ëŒ€ìƒì˜ ì¸ì½”ë”©, ì¶œë ¥ ê²°ê³¼ë¬¼ì˜ ì¸ì½”ë”©ì„ ë„£ëŠ”ë‹¤. ë³´í†µ ë¬¸ìì—´ì€ `utf8` ì¸ì½”ë”©ì„, ì•”í˜¸ëŠ” `base64`ë¥¼ ë§ì´ ì‚¬ìš©í•œë‹¤.

- **cipher.final(ì¶œë ¥ ì¸ì½”ë”©)**: ì¶œë ¥ ê²°ê³¼ë¬¼ì˜ ì¸ì½”ë”©ì„ ë„£ìœ¼ë©´ ì•”í˜¸í™”ê°€ ì™„ë£Œëœë‹¤.

- **crypto.createDecipheriv(ì•Œê³ ë¦¬ì¦˜, í‚¤, iv)**: ë³µí˜¸í™”í•  ë•Œ ì‚¬ìš©í•œë‹¤. ì•”í˜¸í™”í•  ë•Œ ì‚¬ìš©í–ˆë˜ ì•Œê³ ë¦¬ì¦˜ê³¼ í‚¤, ivë¥¼ ê·¸ëŒ€ë¡œ ë„£ì–´ì•¼ í•œë‹¤.

- **decipher.update(ë¬¸ìì—´, ì¸ì½”ë”©, ì¶œë ¥ ì¸ì½”ë”©)**: ì•”í˜¸í™”ëœ ë¬¸ì¥, ê·¸ ë¬¸ì¥ì˜ ì¸ì½”ë”©, ë³µí˜¸í™”í•  ì¸ì½”ë”©ì„ ë„£ëŠ”ë‹¤. `createCipheriv`ì˜ `update()`ì—ì„œ utf8, base64ìˆœìœ¼ë¡œ ë„£ì—ˆë‹¤ë©´ `createDecipheriv`ì˜ `update()`ì—ì„œëŠ” base64, utf8ìˆœìœ¼ë¡œ ë„£ìœ¼ë©´ ëœë‹¤.

- **decipher.final(ì¶œë ¥ ì¸ì½”ë”©)**: ë³µí˜¸í™” ê²°ê³¼ë¬¼ì˜ ì¸ì½”ë”©ì„ ë„£ëŠ”ë‹¤.

> ì½˜ì†”

```
$ node cipher
ì•”í˜¸í™”: iiopeG2GsYlk6ccoBoFvEH2EBDMWv1kK9bNuDjYxiN0=
ë³µí˜¸í™”: ì•”í˜¸í™”í•  ë¬¸ì¥
```

ì›ë˜ ë¬¸ì¥ìœ¼ë¡œ ì œëŒ€ë¡œ ë³µí˜¸í™”ë˜ì—ˆë‹¤.

ì§€ê¸ˆê¹Œì§€ ë°°ìš´ ë©”ì„œë“œ ì´ì™¸ì—ë„ crypto ëª¨ë“ˆì€ ì–‘ë°©í–¥ ë¹„ëŒ€ì¹­í˜• ì•”í˜¸í™”, HMAC ë“±ê³¼ ê°™ì€ ë‹¤ì–‘í•œ ì•”í˜¸í™”ë¥¼ ì œê³µí•˜ê³  ìˆìœ¼ë‹ˆ ì•”í˜¸í™”ê°€ í•„ìš”í•˜ë©´ ëª¨ë“ˆì´ ì–´ë–¤ ë©”ì„œë“œë“¤ì„ ì§€ì›í•˜ëŠ”ì§€ í™•ì¸í•´ë³´ë©´ ì¢‹ë‹¤. [ë…¸ë“œ ê³µì‹ ë¬¸ì„œ](https://nodejs.org/api/crypto.html)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ì¢€ ë” ê°„ë‹¨í•˜ê²Œ ì•”í˜¸í™”ë¥¼ í•˜ê³  ì‹¶ë‹¤ë©´ npm íŒ¨í‚¤ì§€ì¸ [crypto-js](https://www.npmjs.com/package/crypto-js)ë¥¼ ì¶”ì²œí•œë‹¤.

#### 3-5-6. util

utilì´ë¼ëŠ” ì´ë¦„ì²˜ëŸ¼ ê°ì¢… í¸ì˜ ê¸°ëŠ¥ì„ ëª¨ì•„ë‘” ëª¨ë“ˆì´ë‹¤. ê³„ì†í•´ì„œ APIê°€ ì¶”ê°€ë˜ê³  ìˆìœ¼ë©°, ê°€ë” deprecatedë˜ì–´ ì‚¬ë¼ì§€ëŠ” ê²½ìš°ë„ ìˆë‹¤.

> Note: deprecatedë€?
>
> deprecatedëŠ” í”„ë¡œê·¸ë˜ë° ìš©ì–´ë¡œ, â€˜ì¤‘ìš”ë„ê°€ ë–¨ì–´ì ¸ ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•Šê³  ì•ìœ¼ë¡œëŠ” ì‚¬ë¼ì§€ê²Œ ë â€™ ê²ƒì´ë¼ëŠ” ëœ»ì´ë‹¤. ìƒˆë¡œìš´ ê¸°ëŠ¥ì´ ë‚˜ì™€ì„œ ê¸°ì¡´ ê¸°ëŠ¥ë³´ë‹¤ ë” ì¢‹ì„ ë•Œ, ê¸°ì¡´ ê¸°ëŠ¥ì„ deprecated ì²˜ë¦¬í•˜ê³¤ í•œë‹¤. ì´ì „ ì‚¬ìš©ìë¥¼ ìœ„í•´ ê¸°ëŠ¥ì„ ì œê±°í•˜ì§€ëŠ” ì•Šì§€ë§Œ ê³§ ì—†ì•¨ ì˜ˆì •ì´ë¯€ë¡œ ë” ì´ìƒ ì‚¬ìš©í•˜ì§€ ë§ë¼ëŠ” ì˜ë¯¸ì´ë‹¤.

> utl.js

```js
const util = require("util");
const crypto = require("crypto");

const dontUseMe = util.deprecate((x, y) => {
  console.log(x + y);
}, "dontUseMe í•¨ìˆ˜ëŠ” deprecatedë˜ì—ˆìœ¼ë‹ˆ ë” ì´ìƒ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”!");
dontUseMe(1, 2);

const randomBytesPromise = util.promisify(crypto.randomBytes);
randomBytesPromise(64)
  .then((buf) => {
    console.log(buf.toString("base64"));
  })
  .catch((error) => {
    console.error(error);
  });
```

- **util.deprecate**: í•¨ìˆ˜ê°€ deprecated ì²˜ë¦¬ ë˜ì—ˆìŒì„ ì•Œë¦°ë‹¤. ì²« ë²ˆì§¸ ì¸ìˆ˜ë¡œ ë„£ì€ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í–ˆì„ ë•Œ ê²½ê³  ë©”ì‹œì§€ê°€ ì¶œë ¥ëœë‹¤. ë‘ ë²ˆì§¸ ì¸ìˆ˜ë¡œ ê²½ê³  ë©”ì‹œì§€ ë‚´ìš©ì„ ë„£ìœ¼ë©´ ëœë‹¤. í•¨ìˆ˜ê°€ ì¡°ë§Œê°„ ì‚¬ë¼ì§€ê±°ë‚˜ ë³€ê²½ë  ë•Œ ì•Œë ¤ì¤„ ìˆ˜ ìˆì–´ ìœ ìš©í•˜ë‹¤.

- **util.promisify**: ì½œë°± íŒ¨í„´ì„ í”„ë¡œë¯¸ìŠ¤ íŒ¨í„´ìœ¼ë¡œ ë°”ê¾¼ë‹¤. ë°”ê¿€ í•¨ìˆ˜ë¥¼ ì¸ìˆ˜ë¡œ ì œê³µí•˜ë©´ ëœë‹¤. ì´ë ‡ê²Œ ë°”ê¿”ë‘ë©´ async/await íŒ¨í„´ê¹Œì§€ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ ì¢‹ë‹¤. 3.5.5.1ì˜ randomBytesì™€ ë¹„êµí•´ë³´ì. í”„ë¡œë¯¸ìŠ¤ë¥¼ ì½œë°±ìœ¼ë¡œ ë°”ê¾¸ëŠ” `util.callbackify`ë„ ìˆì§€ë§Œ ìì£¼ ì‚¬ìš©ë˜ì§€ëŠ” ì•ŠëŠ”ë‹¤.

> ì½˜ì†”

```
sangminpark@Sangminui-MacBookPro-16 test % node util
3
(node:39217) DeprecationWarning: dontUseMe í•¨ìˆ˜ëŠ” deprecatedë˜ì—ˆìœ¼ë‹ˆ ë” ì´ìƒ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”!
(Use `node --trace-deprecation ...` to show where the warning was created)
RaLqtSBpx4v18cu6VkRvAG0pvv+exu49apx5aObHN6efHkvtRZ7fQVnqyCLzYoDhPWq9JeNcr8ZFAcqNrOqdyg==
```

#### 3-5-7. worker_threads

ë…¸ë“œì—ì„œ ë©€í‹° ìŠ¤ë ˆë“œ ë°©ì‹ìœ¼ë¡œ ì‘ì—…í•˜ëŠ” ë°©ë²•ì„ ì†Œê°œí•œë‹¤. `worker_threads` ëª¨ë“ˆë¡œ ê°€ëŠ¥í•˜ë‹¤.

> worker_thread.js

```js
const { Worker, isMainThread, parentPort } = require("worker_threads");

if (isMainThread) {
  // ë¶€ëª¨ì¼ ë•Œ
  const worker = new Worker(__filename);
  worker.on("message", (message) => console.log("from worker", message));
  worker.on("exit", () => console.log("worker exit"));
  worker.postMessage("ping");
} else {
  // ì›Œì»¤ì¼ ë•Œ
  parentPort.on("message", (value) => {
    console.log("from parent", value);
    parentPort.postMessage("pong");
    parentPort.close();
  });
}
```

`isMainThread`ë¥¼ í†µí•´ í˜„ì¬ ì½”ë“œê°€ ë©”ì¸ ìŠ¤ë ˆë“œ(ê¸°ì¡´ì— ë™ì‘í•˜ë˜ ì‹±ê¸€ ìŠ¤ë ˆë“œë¥¼ ë©”ì¸ ìŠ¤ë ˆë“œ ë˜ëŠ” ë¶€ëª¨ ìŠ¤ë ˆë“œë¼ê³  ë¶€ë¥¸ë‹¤)ì—ì„œ ì‹¤í–‰ë˜ëŠ”ì§€, ì•„ë‹ˆë©´ ìš°ë¦¬ê°€ ìƒì„±í•œ ì›Œì»¤ ìŠ¤ë ˆë“œì—ì„œ ì‹¤í–‰ë˜ëŠ”ì§€ êµ¬ë¶„ëœë‹¤. ë©”ì¸ ìŠ¤ë ˆë“œì—ì„œëŠ” new Workerë¥¼ í†µí•´ í˜„ì¬ íŒŒì¼(`\_\_filename`)ì„ ì›Œì»¤ ìŠ¤ë ˆë“œì—ì„œ ì‹¤í–‰ì‹œí‚¤ê³  ìˆë‹¤. ë¬¼ë¡  í˜„ì¬ íŒŒì¼ì˜ else ë¶€ë¶„ë§Œ ì›Œì»¤ ìŠ¤ë ˆë“œì—ì„œ ì‹¤í–‰ëœë‹¤.

ë¶€ëª¨ì—ì„œëŠ” ì›Œì»¤ ìƒì„± í›„ `worker.postMessage`ë¡œ ì›Œì»¤ì— ë°ì´í„°ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆë‹¤. ì›Œì»¤ëŠ” `parentPort.on('message')` ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¡œ ë¶€ëª¨ë¡œë¶€í„° ë©”ì‹œì§€ë¥¼ ë°›ê³ , `parentPort.postMessage`ë¡œ ë¶€ëª¨ì—ê²Œ ë©”ì‹œì§€ë¥¼ ë³´ë‚¸ë‹¤. ë¶€ëª¨ëŠ” `worker.on('message')`ë¡œ ë©”ì‹œì§€ë¥¼ ë°›ëŠ”ë‹¤. ì°¸ê³ ë¡œ ë©”ì‹œì§€ë¥¼ í•œ ë²ˆë§Œ ë°›ê³  ì‹¶ë‹¤ë©´ `once('message')`ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

ì›Œì»¤ì—ì„œ on ë©”ì„œë“œë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” ì§ì ‘ ì›Œì»¤ë¥¼ ì¢…ë£Œí•´ì•¼ í•œë‹¤ëŠ” ì ì— ì£¼ì˜í•˜ì. `parentPort.close()`ë¥¼ í•˜ë©´ ë¶€ëª¨ì™€ì˜ ì—°ê²°ì´ ì¢…ë£Œëœë‹¤. ì¢…ë£Œë  ë•ŒëŠ” `worker.on('exit')`ì´ ì‹¤í–‰ëœë‹¤.

ì‹¤ì œë¡œ ì‹¤í–‰í•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.

> ì½˜ì†”

```
$ node worker_threads
from parent ping
from worker pong
worker exit
```

ì•„ì§ê¹Œì§€ëŠ” ì›Œì»¤ ìŠ¤ë ˆë“œë¥¼ ì‚¬ìš©í•´ ë³µì¡í•œ ì‘ì—…ì€ í•˜ì§€ ì•Šì•˜ë‹¤. ì´ë²ˆì—ëŠ” ì—¬ëŸ¬ ê°œì˜ ì›Œì»¤ ìŠ¤ë ˆë“œì— ë°ì´í„°ë¥¼ ë„˜ê²¨ë³´ìë‹¤. postMessageë¡œ ë°ì´í„°ë¥¼ ë³´ë‚´ëŠ” ë°©ë²•ê³¼ëŠ” ë‹¤ë¥¸ ë°©ë²•ì´ë‹¤.

> worker_data.js

```js
const {
  Worker,
  isMainThread,
  parentPort,
  workerData,
} = require("worker_threads");

if (isMainThread) {
  // ë¶€ëª¨ì¼ ë•Œ
  const threads = new Set();
  threads.add(
    new Worker(__filename, {
      workerData: { start: 1 },
    })
  );
  threads.add(
    new Worker(__filename, {
      workerData: { start: 2 },
    })
  );
  for (let worker of threads) {
    worker.on("message", (message) => console.log("from worker", message));
    worker.on("exit", () => {
      threads.delete(worker);
      if (threads.size === 0) {
        console.log("job done");
      }
    });
  }
} else {
  // ì›Œì»¤ì¼ ë•Œ
  const data = workerData;
  parentPort.postMessage(data.start + 100);
}
```

new Workerë¥¼ í˜¸ì¶œí•  ë•Œ ë‘ ë²ˆì§¸ ì¸ìˆ˜ì˜ workerData ì†ì„±ìœ¼ë¡œ ì›í•˜ëŠ” ë°ì´í„°ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆë‹¤. ì›Œì»¤ì—ì„œëŠ” workerDataë¡œ ë¶€ëª¨ë¡œë¶€í„° ë°ì´í„°ë¥¼ ë°›ëŠ”ë‹¤. í˜„ì¬ ë‘ ê°œì˜ ì›Œì»¤ê°€ ëŒì•„ê°€ê³  ìˆìœ¼ë©°, ê°ê° ë¶€ëª¨ë¡œë¶€í„° ìˆ«ìë¥¼ ë°›ì•„ì„œ 100ì„ ë”í•´ ëŒë ¤ì¤€ë‹¤. ëŒë ¤ì£¼ëŠ” ìˆœê°„ ì›Œì»¤ê°€ ì¢…ë£Œë˜ì–´ `worker.on('exit')`ì´ ì‹¤í–‰ëœë‹¤. ì›Œì»¤ ë‘ ê°œê°€ ëª¨ë‘ ì¢…ë£Œë˜ë©´ job doneì´ ë¡œê¹…ëœë‹¤.

> ì½˜ì†”

```
from worker 101
from worker 102
job done
```

ì´ë²ˆì—ëŠ” ì¢€ ë” ì‹¤ì „ì ì¸ ì˜ˆì œë¡œ ì†Œìˆ˜ì˜ ê°œìˆ˜ë¥¼ êµ¬í•˜ëŠ” ì‘ì—…ì„ ì›Œì»¤ ìŠ¤ë ˆë“œë¥¼ í†µí•´ í•´ë³´ì. ì†Œìˆ˜ë¥¼ ì°¾ëŠ” ì‘ì—…ì€ ì—°ì‚°ì´ ë§ì´ ë“¤ì–´ê°€ëŠ” ëŒ€í‘œì ì¸ ì‘ì—…ì´ë‹¤.

ë¨¼ì € ì›Œì»¤ ìŠ¤ë ˆë“œë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì˜ˆì œì´ë‹¤.

> prime.js

```js
const min = 2;
const max = 10000000;
const primes = [];

function generatePrimes(start, range) {
  let isPrime = true;
  const end = start + range;
  for (let i = start; i < end; i++) {
    for (let j = min; j < Math.sqrt(end); j++) {
      if (i !== j && i % j === 0) {
        isPrime = false;
        break;
      }
    }
    if (isPrime) {
      primes.push(i);
    }
    isPrime = true;
  }
}

console.time("prime");
generatePrimes(min, max);
console.timeEnd("prime");
console.log(primes.length);
```

2ë¶€í„° 1,000ë§Œê¹Œì§€ì˜ ìˆ«ì ì¤‘ì— ì†Œìˆ˜ê°€ ëª¨ë‘ ëª‡ ê°œ ìˆëŠ”ì§€ë¥¼ ì•Œì•„ë‚´ëŠ” ì½”ë“œì´ë‹¤. ì½”ë“œë¥¼ ì‹¤í–‰í•´ë³´ì.

> ì½˜ì†”

```
sangminpark@Sangminui-MacBookPro-16 test % node prime.js
prime: 10.507s
664579
```

ì‚¬ìš©ìì˜ ì»´í“¨í„° ì„±ëŠ¥ì— ë”°ë¼ ë‹¤ë¥´ì§€ë§Œ ìƒë‹¹í•œ ì‹œê°„ì´ ì†Œìš”ëœë‹¤. ì´ë²ˆì—ëŠ” ì›Œì»¤ ìŠ¤ë ˆë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì—¬ëŸ¬ ê°œì˜ ìŠ¤ë ˆë“œë“¤ì´ ë¬¸ì œë¥¼ ë‚˜ëˆ ì„œ í’€ë„ë¡ í•´ ë³´ì. ë¯¸ë¦¬ ë§í•˜ì§€ë§Œ ë©€í‹° ìŠ¤ë ˆë”©ì€ ìƒë‹¹íˆ ì–´ë µë‹¤. ì½”ë“œì–‘ë„ ë§ì•„ì§„ë‹¤.

> prime-worker.js

```js
const {
  Worker,
  isMainThread,
  parentPort,
  workerData,
} = require("worker_threads");

const min = 2;
let primes = [];

function findPrimes(start, range) {
  let isPrime = true;
  let end = start + range;
  for (let i = start; i < end; i++) {
    for (let j = min; j < Math.sqrt(end); j++) {
      if (i !== j && i % j === 0) {
        isPrime = false;
        break;
      }
    }
    if (isPrime) {
      primes.push(i);
    }
    isPrime = true;
  }
}

if (isMainThread) {
  const max = 10000000;
  const threadCount = 8;
  const threads = new Set();
  const range = Math.ceil((max - min) / threadCount);
  let start = min;
  console.time("prime");
  for (let i = 0; i < threadCount - 1; i++) {
    const wStart = start;
    threads.add(
      new Worker(__filename, { workerData: { start: wStart, range } })
    );
    start += range;
  }
  threads.add(
    new Worker(__filename, {
      workerData: { start, range: range + ((max - min + 1) % threadCount) },
    })
  );
  for (let worker of threads) {
    worker.on("error", (err) => {
      throw err;
    });
    worker.on("exit", () => {
      threads.delete(worker);
      if (threads.size === 0) {
        console.timeEnd("prime");
        console.log(primes.length);
      }
    });
    worker.on("message", (msg) => {
      primes = primes.concat(msg);
    });
  }
} else {
  findPrimes(workerData.start, workerData.range);
  parentPort.postMessage(primes);
}
```

ì—¬ëŸ ê°œì˜ ìŠ¤ë ˆë“œê°€ ì¼ì„ ë‚˜ëˆ ì„œ ì²˜ë¦¬í•˜ê²Œ í–ˆë‹¤. ë©€í‹° ìŠ¤ë ˆë”©ì„ í•  ë•ŒëŠ” ì¼ì„ ë‚˜ëˆ ì„œ ì²˜ë¦¬í•˜ë„ë¡ í•˜ëŠ” ê²Œ ì œì¼ ì–´ë µë‹¤. ì–´ë– í•œ ì¼ì€ ê³µìœ í•˜ê³  ìˆëŠ” ë°ì´í„°ê°€ ë§ì•„ ì¼ì„ ë‚˜ëˆ„ê¸°ê°€ ì–´ë µë‹¤. ë‹¤í–‰íˆ ì†Œìˆ˜ì˜ ê°œìˆ˜ë¥¼ êµ¬í•˜ëŠ” ì‘ì—…ì€ ì •í•´ì§„ ë²”ìœ„(2ë¶€í„° 1,000ë§Œ)ë¥¼ ìŠ¤ë ˆë“œë“¤ì´ ì¼ì •í•˜ê²Œ ë‚˜ëˆ ì„œ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.

> ì½˜ì†”

```
sangminpark@Sangminui-MacBookPro-16 test % node prime-worker.js
prime: 1.640s
664579
```

ì†ë„ê°€ 6ë°° ì •ë„ ë¹¨ë¼ì¡Œë‹¤. ì›Œì»¤ ìŠ¤ë ˆë“œë¥¼ ì—¬ëŸ ê°œ ì‚¬ìš©í–ˆë‹¤ê³  í•´ì„œ ì—¬ëŸ ë°° ë¹¨ë¼ì§€ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤. ìŠ¤ë ˆë“œë¥¼ ìƒì„±í•˜ê³  ìŠ¤ë ˆë“œ ì‚¬ì´ì—ì„œ í†µì‹ í•˜ëŠ” ë° ìƒë‹¹í•œ ë¹„ìš©ì´ ë°œìƒí•˜ë¯€ë¡œ, ì´ ì ì„ ê³ ë ¤í•´ì„œ ë©€í‹° ìŠ¤ë ˆë”©ì„ í•´ì•¼ í•œë‹¤. ì˜ëª»í•˜ë©´ ë©€í‹° ìŠ¤ë ˆë”©ì„ í•  ë•Œ ì‹±ê¸€ ìŠ¤ë ˆë”©ë³´ë‹¤ ë” ëŠë ¤ì§€ëŠ” í˜„ìƒë„ ë°œìƒí•  ìˆ˜ ìˆë‹¤.

ë‹¤ìŒ ì ˆì—ì„œëŠ” ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ë§Œë“¤ì–´ ì‘ì—…í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë³¼ ê²ƒì´ë‹¤.

#### 3-5-8. child_process

ë…¸ë“œì—ì„œ ë‹¤ë¥¸ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•˜ê³  ì‹¶ê±°ë‚˜ ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” ëª¨ë“ˆì´ë‹¤. ì´ ëª¨ë“ˆì„ í†µí•´ ë‹¤ë¥¸ ì–¸ì–´ì˜ ì½”ë“œ(ì˜ˆë¥¼ ë“¤ë©´, íŒŒì´ì¬)ë¥¼ ì‹¤í–‰í•˜ê³  ê²°ê´ê°’ì„ ë°›ì„ ìˆ˜ ìˆë‹¤. ì´ë¦„ì´ `child_process`(ìì‹ í”„ë¡œì„¸ìŠ¤)ì¸ ì´ìœ ëŠ” í˜„ì¬ ë…¸ë“œ í”„ë¡œì„¸ìŠ¤ ì™¸ì— ìƒˆë¡œìš´ í”„ë¡œì„¸ìŠ¤ë¥¼ ë„ì›Œì„œ ëª…ë ¹ì„ ìˆ˜í–‰í•˜ê³ , ë…¸ë“œ í”„ë¡œì„¸ìŠ¤ì— ê²°ê³¼ë¥¼ ì•Œë ¤ì£¼ê¸° ë•Œë¬¸ì´ë‹¤.

ë¨¼ì € ëª…ë ¹ í”„ë¡¬í”„íŠ¸ì˜ ëª…ë ¹ì–´ì¸ dirì„ ë…¸ë“œë¥¼ í†µí•´ ì‹¤í–‰í•´ë³´ì.

> exec.js

```js
const exec = require("child_process").exec;

var process = exec("ls");

process.stdout.on("data", function (data) {
  console.log(data.toString());
}); // ì‹¤í–‰ ê²°ê³¼

process.stderr.on("data", function (data) {
  console.error(data.toString());
}); // ì‹¤í–‰ ì—ëŸ¬
```

execì˜ ì²« ë²ˆì§¸ ì¸ìˆ˜ë¡œ ëª…ë ¹ì–´ë¥¼ ë„£ëŠ”ë‹¤. ì‹¤í–‰í•˜ë©´ í˜„ì¬ í´ë”ì˜ íŒŒì¼ ëª©ë¡ë“¤ì´ í‘œì‹œë  ê²ƒì´ë‹¤.

ê²°ê³¼ëŠ” stdout(í‘œì¤€ì¶œë ¥)ê³¼ stderr(í‘œì¤€ì—ëŸ¬)ì— ë¶™ì—¬ë‘” data ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆì— ë²„í¼ í˜•íƒœë¡œ ì „ë‹¬ëœë‹¤. ì„±ê³µì ì¸ ê²°ê³¼ëŠ” í‘œì¤€ì¶œë ¥ì—ì„œ, ì‹¤íŒ¨í•œ ê²°ê³¼ëŠ” í‘œì¤€ì—ëŸ¬ì—ì„œ í‘œì‹œëœë‹¤. ë²„í¼ëŠ” 3.6.2ì ˆì—ì„œ ìì„¸íˆ ì•Œì•„ë³¸ë‹¤.

> ì½˜ì†”

```
$ node exec
(í˜„ì¬ í´ë”ì˜ íŒŒì¼ ëª©ë¡ í‘œì‹œ)
```

ì´ë²ˆì—ëŠ” íŒŒì´ì¬ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•´ë³´ì. ì‹¤ìŠµí•˜ë ¤ë©´ íŒŒì´ì¬ 3ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•œë‹¤.

> test.py

```py
print('hello python')
```

> spawn.js

```js
const spawn = require("child_process").spawn;

var process = spawn("python", ["test.py"]);

process.stdout.on("data", function (data) {
  console.log(data.toString());
}); // ì‹¤í–‰ ê²°ê³¼

process.stderr.on("data", function (data) {
  console.error(data.toString());
}); // ì‹¤í–‰ ì—ëŸ¬
```

íŒŒì´ì¬ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ëª…ë ¹ì–´ì¸ `python test.py`ë¥¼ ë…¸ë“œì˜ spawnì„ í†µí•´ ì‹¤í–‰í•œë‹¤. spawnì˜ ì²« ë²ˆì§¸ ì¸ìˆ˜ë¡œ ëª…ë ¹ì–´ë¥¼, ë‘ ë²ˆì§¸ ì¸ìˆ˜ë¡œ ì˜µì…˜ ë°°ì—´ì„ ë„£ìœ¼ë©´ ëœë‹¤. ê²°ê³¼ëŠ” execê³¼ ë§ˆì°¬ê°€ì§€ë¡œ stdout, stderrì˜ ë°ì´í„°ë¡œ ë‚˜ì˜¨ë‹¤.

> ì½˜ì†”

```
sangminpark@Sangminui-MacBookPro-16 test % node spawn.js
hello python
```

execê³¼ spawnì˜ ì°¨ì´ê°€ ê¶ê¸ˆí•  ê²ƒì´ë‹¤. execì€ ì…¸ì„ ì‹¤í–‰í•´ì„œ ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ê³ , spawnì€ ìƒˆë¡œìš´ í”„ë¡œì„¸ìŠ¤ë¥¼ ë„ìš°ë©´ì„œ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•œë‹¤. spawnì—ì„œë„ ì„¸ ë²ˆì§¸ ì¸ìˆ˜ë¡œ `{ shell: true }`ë¥¼ ì œê³µí•˜ë©´ execì²˜ëŸ¼ ì…¸ì„ ì‹¤í–‰í•´ì„œ ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•œë‹¤. ì…¸ì„ ì‹¤í–‰í•˜ëŠ”ì§€ ë§ˆëŠ”ì§€ì— ë”°ë¼ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ëª…ë ¹ì–´ì— ì°¨ì´ê°€ ìˆë‹¤.

#### 3-5-9. ê¸°íƒ€ ëª¨ë“ˆë“¤

ì´ ì±…ì—ì„œ ì–¸ê¸‰í•˜ì§€ ì•Šì€ ëª¨ë“ˆë“¤ì´ ë§ë‹¤. ì—¬ê¸°ì„œëŠ” ê° ëª¨ë“ˆì˜ ì´ë¦„ê³¼ ìš©ë„ë§Œ ê°„ë‹¨íˆ ì†Œê°œí•˜ê³  ë„˜ì–´ê°„ë‹¤. ìì„¸í•œ ì‚¬í•­ì„ ì•Œê³  ì‹¶ë‹¤ë©´ ê³µì‹ ë¬¸ì„œë¥¼ ì°¸ì¡°í•˜ë©´ ëœë‹¤. ì‹¤í—˜ì ì¸ ëª¨ë“ˆë“¤ì€ ì œì™¸í–ˆê³ , ì—¬ê¸°ì— ì–¸ê¸‰ë˜ì§€ ì•Šì€ ëª¨ë“ˆë“¤ì€ ì¶”í›„ì— ë‚˜ì˜¨ë‹¤.

- **assert**: ê°’ì„ ë¹„êµí•˜ì—¬ í”„ë¡œê·¸ë¨ì´ ì œëŒ€ë¡œ ë™ì‘í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•˜ëŠ”ë° ì‚¬ìš©í•œë‹¤.
- **dns**: ë„ë©”ì¸ ì´ë¦„ì— ëŒ€í•œ IP ì£¼ì†Œë¥¼ ì–»ì–´ë‚´ëŠ” ë° ì‚¬ìš©í•œë‹¤.
- **net**: HTTPë³´ë‹¤ ë¡œìš° ë ˆë²¨ì¸ TCPë‚˜ IPC í†µì‹ ì„ í•  ë•Œ ì‚¬ìš©í•œë‹¤.
- **string_decoder**: ë²„í¼ ë°ì´í„°ë¥¼ ë¬¸ìì—´ë¡œ ë°”ê¾¸ëŠ” ë° ì‚¬ìš©í•œë‹¤.
- **tls**: TLSì™€ SSLì— ê´€ë ¨ëœ ì‘ì—…ì„ í•  ë•Œ ì‚¬ìš©í•œë‹¤.
- **tty**: í„°ë¯¸ë„ê³¼ ê´€ë ¨ëœ ì‘ì—…ì„ í•  ë•Œ ì‚¬ìš©í•œë‹¤.
- **dgram**: UDPì™€ ê´€ë ¨ëœ ì‘ì—…ì„ í•  ë•Œ ì‚¬ìš©í•œë‹¤.
- **v8**: V8 ì—”ì§„ì— ì§ì ‘ ì ‘ê·¼í•  ë•Œ ì‚¬ìš©í•œë‹¤.
- **vm**: ê°€ìƒ ë¨¸ì§„ì— ì§ì ‘ ì ‘ê·¼í•  ë•Œ ì‚¬ìš©í•œë‹¤.

ì§€ê¸ˆê¹Œì§€ ê¸°ë³¸ì ì¸ ëª¨ë“ˆë“¤ì„ ì•Œì•„ë´¤ë‹¤. ë‹¤ìŒ ì ˆì—ì„œëŠ” fs ëª¨ë“ˆê³¼ í•¨ê»˜ ë™ê¸° ë©”ì„œë“œì™€ ë¹„ë™ê¸° ë©”ì„œë“œë¥¼ ì•Œì•„ë³´ê³  ë²„í¼ì™€ ìŠ¤íŠ¸ë¦¼ì„ ë°°ì›Œë³¼ ê²ƒì´ë‹¤.
